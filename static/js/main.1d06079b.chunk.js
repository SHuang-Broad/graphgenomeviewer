(this.webpackJsonpgenomegraph=this.webpackJsonpgenomegraph||[]).push([[0],{69:function(e,t,a){e.exports=a(95)},74:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(74),a(33)),i=a.n(o),s=a(43),u=a(41),m=a(8),h=a(40),d=a(101),f=a(61);function g(e){var t=e.data,a=e.onHide;return r.a.createElement(d.a,{show:!0,onHide:a},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,null,"Feature details")),r.a.createElement(d.a.Body,null,r.a.createElement("div",null,"Attributes"),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))})),r.a.createElement("hr",null),t.tags&&Object.keys(t.tags).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Tags"),Object.entries(t.tags).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))}))):null,r.a.createElement(d.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:a},"Close"))))}var p=a(66),b=a(11),E=a(9),v=a(35),k=a(57);function O(e,t){var a=e.split(":"),n=Object(m.a)(a,3),r=n[0],c=n[1],l=n[2];"i"===c?t[r]=+l:"Z"===c&&(t[r]=l)}function j(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push([n.source.x,n.source.y])}var r=e[a-1];return t.push([r.target.x,r.target.y]),t}function w(e,t){var a;return(a="linkNum",e.reduce((function(e,t){var n=a instanceof Function?a(t):t[a];if(void 0!==n){var r=e.find((function(e){return e&&e.key===n}));r?r.values.push(t):e.push({key:n,values:[t]})}return e}),[])).map((function(e){return{links:j(e.values),original:t[e.key]}}))}function y(e,t,a,n,r){var c=Math.sqrt(Math.pow(n-t,2)+Math.pow(a-e,2));return[a+r*((a-e)/c),n+r*((n-t)/c)]}var C=r.a.forwardRef((function(e,t){var a=Object(n.useRef)(),c=e.graph,l=e.drawPaths,o=void 0!==l&&l,i=e.drawLabels,s=void 0!==i&&i,h=e.drag,d=void 0!==h&&h,f=e.settings,g=f.chunkSize,p=void 0===g?1e3:g,v=f.forceSteps,k=void 0===v?500:v,O=f.linkSteps,j=void 0===O?3:O,C=f.sequenceThickness,x=void 0===C?10:C,T=f.linkThickness,L=void 0===T?2:T,G=f.theta,M=void 0===G?.9:G,H=f.forceType,B=void 0===H?"center":H,F=f.strengthCenter,N=void 0===F?-50:F,q=f.strengthXY,z=void 0===q?.3:q,W=e.color,A=void 0===W?"Rainbow":W,D=e.width,I=void 0===D?2e3:D,P=e.height,R=void 0===P?1e3:P,_=e.redraw,X=void 0===_?0:_,Y=e.onFeatureClick,J=void 0===Y?function(){console.log("no feature click configured")}:Y,U=Object(n.useRef)(E.zoom().extent([[0,0],[I,R]]).scaleExtent([.1,8])),V=Object(n.useMemo)((function(){return function(e,t){for(var a={nodes:[],links:[]},n={},r=0;r<(e.paths||{}).length;r++)for(var c=e.paths[r],l=c.path.split(","),o=0;o<l.length-1;o++){var i="".concat(l[o],"_").concat(l[o+1]);n[i]?n[i].push(c.name):n[i]=[c.name]}for(var s=0;s<e.nodes.length;s++){var m=e.nodes[s],h=m.id,d=m.sequence,f=m.length,g=Object(u.a)(m,["id","sequence","length"]),p=[];p.push(Object(b.a)(Object(b.a)({},g),{},{id:"".concat(h,"-start")}));for(var E=t;E<f-t;E+=t)p.push(Object(b.a)(Object(b.a)({},g),{},{id:"".concat(h,"-").concat(E)}));p.push(Object(b.a)(Object(b.a)({},g),{},{id:"".concat(h,"-end")}));for(var v=0;v<p.length-1;v++){var k=p[v].id,O=p[v+1].id;a.links.push(Object(b.a)(Object(b.a)({},g),{},{source:k,target:O,id:h,length:f,sequence:d,linkNum:s}))}a.nodes=a.nodes.concat(p)}for(var j=0;j<e.links.length;j++){var w=e.links[j],y=w.strand1,C=w.strand2,S=w.source,x=w.target,T=Object(u.a)(w,["strand1","strand2","source","target"]),L=n["".concat(S).concat(y,"_").concat(x).concat(C)]||[],G=S===x,M=Object(b.a)({source:"".concat(S,"-").concat("+"===y?"end":"start"),target:"".concat(x,"-").concat("+"===C?"start":"end")},T);G&&(M.loop=!0),L.length&&(M.paths=L),a.links.push(M)}return a}(c,p)}),[p,c]),Z=Object(n.useMemo)((function(){return Object.fromEntries((c.paths||[]).map((function(e,t){return[e.name,E.schemeCategory10[t]]})))}),[c.paths]),$=Object(n.useMemo)((function(){var e=V.links.map((function(e){return Object.create(Object(b.a)(Object(b.a)({},e),{},{x:Math.random(),y:Math.random()}))})),t=V.nodes.map((function(e){return Object.create(Object(b.a)(Object(b.a)({},e),{},{x:Math.random(),y:Math.random()}))})),a=E.forceSimulation(t).force("link",E.forceLink(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10})).iterations(j)).force("charge",E.forceManyBody().strength(N).theta(M));"center"===B?a.force("center",E.forceCenter(I/3,R/3)):"xy"===B&&a.force("x",E.forceX().x(I/3).strength(z)).force("y",E.forceY().y(R/3).strength(z));for(var n=0;n<k;++n)a.tick();return e}),[V.links,V.nodes,j,N,M,B,X,I,R,z,k]);Object(n.useEffect)((function(){var e=E.select(t.current);d?e.call(U.current.on("zoom",(function(){E.select(a.current).attr("transform",E.event.transform)}))):e.on(".zoom",null)}),[d,R,t,I,U]);for(var K=w($,c.nodes),Q=function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n],c=t[n];c.id||a.push({links:[[r.source.x,r.source.y],[r.target.x,r.target.y]],original:c})}return a}($,V.links),ee={},te=0;te<K.length;te++){var ae=K[te],ne=ae.links.length;ee["".concat(ae.original.id,"-start")]=[ae.links[1],ae.links[0]],ee["".concat(ae.original.id,"-end")]=[ae.links[ne-2],ae.links[ne-1]]}return r.a.createElement("svg",{width:"100%",height:"100%",ref:t,style:{fontSize:10},viewBox:[0,0,I,R].toString()},r.a.createElement("g",{ref:a},Q.map((function(e,t){var a=e.links[0][0],n=e.links[0][1],c=e.links[1][0],l=e.links[1][1];if(o){var i=Object(m.a)(ee[e.original.source],2),s=i[0],u=i[1],h=Object(m.a)(ee[e.original.target],2),d=h[0],f=h[1],g=(l-n)/(c-a),p=(s[1]-u[1])/(s[0]-u[0]),b=(d[1]-f[1])/(d[0]-f[0]);return Math.abs(g-p)<.2||Math.abs(g-b)<.2?e.original.paths?e.original.paths.map((function(t,o){var i=c-a,s=l-n,u=Math.sqrt(i*i+s*s)+40*Math.random(),m=o%2,h="M".concat(a,",").concat(n,"A").concat(u,",").concat(u," 0 0,").concat(m," ").concat(c,",").concat(l);return r.a.createElement("path",{key:"".concat(h,"-").concat(o),d:h,strokeWidth:L,stroke:Z[t],fill:"none",onClick:function(){return J(e.original)}},r.a.createElement("title",null,t))})):null:e.original.paths?e.original.paths.map((function(t,o){var i=y(s[0],s[1],u[0],u[1],60+30*o),h=Object(m.a)(i,2),g=h[0],p=h[1],b=y(d[0],d[1],f[0],f[1],60+30*o),v=Object(m.a)(b,2),k=v[0],O=v[1],j=E.path();return j.moveTo(a,n),j.bezierCurveTo(g,p,k,O,c,l),r.a.createElement("path",{key:"".concat(j.toString(),"-").concat(o),d:j,strokeWidth:L,stroke:Z[t],fill:"none",onClick:function(){return J(e.original)}},r.a.createElement("title",null,t))})):null}var v=Object(m.a)(ee[e.original.source],2),k=v[0],O=v[1],j=Object(m.a)(ee[e.original.target],2),w=j[0],C=j[1],S=(l-n)/(c-a),x=(k[1]-O[1])/(k[0]-O[0]),T=(w[1]-C[1])/(w[0]-C[0]),G=E.line().context(null),M=e.original.loop&&!(S-x<.5||S-T<.5)?"M".concat(a,",").concat(n,"A").concat(-30,",").concat(-20," ").concat(90,",").concat(1,",").concat(0," ").concat(c,",").concat(l):G(e.links);return r.a.createElement("path",{key:"".concat(M.toString(),"-").concat(t),d:M,strokeWidth:L,stroke:"black",fill:"none",onClick:function(){return J(e.original)}})})),K.map((function(e,t){var a=A.startsWith("Just")?A.replace("Just","").toLowerCase():E.hsl(E["interpolate".concat(A)](t/K.length)).darker();return r.a.createElement(S,{key:e.original.id,sequenceThickness:x,drawLabels:s,path:e,stroke:a,onFeatureClick:J})}))))}));function S(e){var t=e.path,a=e.drawLabels,n=e.sequenceThickness,c=e.stroke,l=e.onFeatureClick,o=E.line().context(null),i=t.links[0],s=t.links[1],u=t.links[t.links.length-1],h=t.links[t.links.length-2],d=y(s[0],s[1],i[0],i[1],100),f=Object(m.a)(d,2),g=f[0],b=f[1],v=y(h[0],h[1],u[0],u[1],100),k=Object(m.a)(v,2),O=k[0],j=k[1],w=o([[g,b]].concat(Object(p.a)(t.links),[[O,j]]));return r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:t.original.id,d:o(t.links),strokeWidth:n,stroke:c,fill:"none",onClick:function(){return l(t.original)}},r.a.createElement("title",null,t.original.id)),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:"".concat(t.original.id,"_invisible"),d:w,fill:"none"}),r.a.createElement("text",{dy:12},r.a.createElement("textPath",{startOffset:"50%",textAnchor:"middle",href:"#".concat(t.original.id,"_invisible")},t.original.id))):null)}var x=a(102);function T(e){var t=e.onDrawLabels,a=e.drawLabels,n=e.drawPaths,c=e.drag,l=e.onDrag,o=e.onColorChange,i=e.onPathDraw,s=e.onRedraw,u=e.colorScheme;return r.a.createElement("div",null,r.a.createElement("p",null,"Settings"),r.a.createElement(x.a.Label,null,"Color"),r.a.createElement(x.a.Control,{value:u,onChange:function(e){return o(e.target.value)},as:"select"},r.a.createElement("option",null,"JustGrey"),r.a.createElement("option",null,"Turbo"),r.a.createElement("option",null,"Rainbow"),r.a.createElement("option",null,"Spectral"),r.a.createElement("option",null,"Viridis"),r.a.createElement("option",null,"RdYlBu")),r.a.createElement("br",null),r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Check,{onChange:function(e){i(e.target.checked)},type:"checkbox",label:"Draw paths",checked:n})),r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Check,{onChange:function(e){t(e.target.checked)},type:"checkbox",label:"Draw labels",checked:a})),r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Check,{onChange:function(e){l(e.target.checked)},type:"checkbox",label:"Enable panning/zooming?",checked:c})),r.a.createElement("br",null),r.a.createElement(f.a,{onClick:function(){return s()}},"Redraw"))}var L=a(104),G=a(105),M=a(103),H=a(17),B=a(100),F=a(62);function N(e){var t=e.onHide,a=e.settings,c=e.onSettings,l=Object(n.useState)(a),o=Object(h.a)(l,2),i=o[0],s=o[1],u=i.chunkSize,m=i.forceSteps,g=i.linkSteps,p=i.strengthCenter,b=i.strengthXY,E=i.forceType,v=i.theta,k=i.sequenceThickness,O=i.linkThickness;return r.a.createElement(d.a,{show:!0,onHide:t,size:"lg"},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,null,"Settings")),r.a.createElement(d.a.Body,null,r.a.createElement(x.a,{onSubmit:function(e){e.preventDefault(),c(Object(H.a)({},i,{chunkSize:+u,forceType:E,forceSteps:+m,linkSteps:+g,strengthCenter:+p,theta:+v,sequenceThickness:+k,linkThickness:+O})),t()}},r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the nodes",r.a.createElement(x.a.Text,{muted:!0},"Used in the force-based layout simulation")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:m,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{forceSteps:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the links",r.a.createElement(x.a.Text,{muted:!0},"Increases the rigidity of the link based constraints")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:g,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{linkSteps:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Sequence chunk size",r.a.createElement(x.a.Text,{muted:!0},"If a contig is of length 5000, then chunk length 1000 would become 5 segments. Note that contigs smaller than the chunk length may not be proportionally sized")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:u,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{chunkSize:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Theta",r.a.createElement(x.a.Text,{muted:!0},"Parameter for the force directed layout")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:v,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{theta:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Strength (force xy)",r.a.createElement(x.a.Text,{muted:!0},"This parameter should be between [0,1], applies to the XY layout")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:b,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{strengthXY:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Strength (particle charge)",r.a.createElement(x.a.Text,{muted:!0},"This value is like a charged particle force, by being negative it keeps things farther apart")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{type:"number",value:p,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{strengthCenter:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Force type",r.a.createElement(x.a.Text,{muted:!0},"Force XY results in a circular style layout that can be helpful for more disjoint graphs, force center is default")),r.a.createElement(F.a,null,r.a.createElement(x.a.Control,{value:E,onChange:function(e){return s((function(t){return Object(H.a)({},t,{forceType:e.target.value})}))},as:"select"},r.a.createElement("option",null,"center"),r.a.createElement("option",null,"xy")))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Sequence thickness"),r.a.createElement(F.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:k,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{sequenceThickness:t})}))}}))),r.a.createElement(x.a.Group,{as:B.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Link thickness"),r.a.createElement(F.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:O,onChange:function(e){var t=e.target.value;s((function(e){return Object(H.a)({},e,{linkThickness:t})}))}}))),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function q(e){var t=e.onHide;return r.a.createElement(d.a,{show:!0,onHide:t},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,null,"graphgenome browser")),r.a.createElement(d.a.Body,null,r.a.createElement("p",null,"This is a small demo of browsing simple graph genomes. The app can read GFA format URLs and local files, all processing is done client side currently."),r.a.createElement("p",null,"Contact ",r.a.createElement("a",{href:"mainto:colin.diesh@gmail.com"},"Colin Diesh")),r.a.createElement("p",null,"Thanks to the BCC2020 pangenome team, and"," ",r.a.createElement("a",{href:"https://github.com/rrwick/Bandage"},"Bandage")," for inspiration."),r.a.createElement("p",null,"Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and gfalint (Shaun Jackman)"),r.a.createElement("p",null,"This app attempts to support GFA2 but does not properly render fragments, intricate edge details, or U and O paths"),r.a.createElement("a",{href:"https://github.com/cmdcolin/graphgenomeviewer"},"GitHub")))}function z(e){var t=e.onHide,a=e.onData,c=Object(n.useState)(),l=Object(m.a)(c,2),o=l[0],i=l[1];return r.a.createElement(d.a,{show:!0,onHide:t},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,null,"graphgenome browser")),r.a.createElement(d.a.Body,null,r.a.createElement(x.a,{onSubmit:function(){a(o),t()}},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Enter URL"),r.a.createElement(x.a.Control,{type:"input",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function W(e){var t=e.onHide,a=e.onGraph,c=Object(n.useRef)();return r.a.createElement(d.a,{show:!0,onHide:t},r.a.createElement(d.a.Header,{closeButton:!0},r.a.createElement(d.a.Title,null,"Open file")),r.a.createElement(d.a.Body,null,r.a.createElement(x.a,{onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c.current.files[0].text();case 3:r=e.sent,a(r),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Open file"),r.a.createElement(x.a.Control,{ref:c,type:"file"})),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function A(e){var t=e.onData,a=e.settings,c=e.onGraph,l=e.onExportSVG,o=e.onSettings,i=Object(n.useState)(),s=Object(m.a)(i,2),u=s[0],h=s[1],d=Object(n.useState)(),f=Object(m.a)(d,2),g=f[0],p=f[1],b=Object(n.useState)(),E=Object(m.a)(b,2),v=E[0],k=E[1],O=Object(n.useState)(),j=Object(m.a)(O,2),w=j[0],y=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{bg:"light",expand:"lg"},r.a.createElement(L.a.Brand,{href:"#home"},"graphgenome browser"),r.a.createElement(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(L.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(G.a,{className:"mr-auto"},r.a.createElement(M.a,{title:"File",id:"basic-nav-dropdown"},r.a.createElement(M.a.Item,{onClick:function(){return k(!0)}},"Open URL"),r.a.createElement(M.a.Item,{onClick:function(){return y(!0)}},"Open file"),r.a.createElement(M.a.Item,{onClick:function(){return l()}},"Export SVG")),r.a.createElement(M.a,{title:"Examples",id:"basic-nav-dropdown"},r.a.createElement(M.a.Item,{onClick:function(){return t("MT.gfa")}},"MT GFA-spec example"),r.a.createElement(M.a.Item,{onClick:function(){return t("toy_pangenome.gfa")}},"Paths example"),r.a.createElement(M.a.Item,{onClick:function(){return t("example1.gfa")}},"Paths example 2"),r.a.createElement(M.a.Item,{onClick:function(){return t("big1.gfa")}},"Big1"),r.a.createElement(M.a.Item,{onClick:function(){return t("ir1.gfa")}},"Ir1"),r.a.createElement(M.a.Item,{onClick:function(){return t("test_contig_placement_assembly_graph.gfa")}},"Unicycler example"),r.a.createElement(M.a.Item,{onClick:function(){return t("circle.gfa")}},"Simple circle"),r.a.createElement(M.a.Item,{onClick:function(){return t("example1.gfa2")}},"GFA2.0 example")),r.a.createElement(G.a.Link,{onClick:function(){p(!0)}},"Settings"),r.a.createElement(G.a.Link,{onClick:function(){h(!0)}},"About")))),u?r.a.createElement(q,{onHide:function(){return h(!1)}}):null,g?r.a.createElement(N,{settings:a,onHide:function(){return p(!1)},onSettings:o}):null,v?r.a.createElement(z,{onData:t,onHide:function(){return k(!1)}}):null,w?r.a.createElement(W,{onGraph:c,onHide:function(){return y(!1)}}):null)}var D=a(64),I=a.n(D),P=a(6);a(93),a(94);var R=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),o=Object(m.a)(l,2),h=o[0],d=o[1],f=Object(n.useState)(),p=Object(m.a)(f,2),b=p[0],E=p[1],j=Object(n.useState)(),w=Object(m.a)(j,2)[1],y=r.a.useCallback((function(){return w({})}),[]),S=Object(n.useState)(0),x=Object(m.a)(S,2),L=x[0],G=x[1],M=Object(P.e)({strengthCenter:Object(P.f)(P.b,-50),strengthXY:Object(P.f)(P.b,.1),chunkSize:Object(P.f)(P.b,1e3),forceSteps:Object(P.f)(P.b,200),linkSteps:Object(P.f)(P.b,1),sequenceThickness:Object(P.f)(P.b,10),linkThickness:Object(P.f)(P.b,2),theta:Object(P.f)(P.b,.9),forceType:Object(P.f)(P.d,"center"),dataset:Object(P.f)(P.d,"MT.gfa"),colorScheme:Object(P.f)(P.d,"Rainbow"),drawLabels:Object(P.f)(P.a,!1),drawPaths:Object(P.f)(P.a,!1),drag:Object(P.f)(P.a,!0)}),H=Object(m.a)(M,2),B=H[0],F=H[1],N=B.dataset,q=B.drawLabels,z=B.drawPaths,W=B.colorScheme,D=B.drag,R=Object(u.a)(B,["dataset","drawLabels","drawPaths","colorScheme","drag"]),_=Object(n.useRef)();Object(n.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch ".concat(t.statusText));case 6:return e.next=8,t.text();case 8:a=e.sent,d(a),E(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),E(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[N]);var X=Object(n.useMemo)((function(){return h?function(e){var t,a={nodes:[],links:[],paths:[],header:[]},n=Object(k.a)(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.startsWith("H")&&function(){var e={},t=r.split("\t");Object(v.a)(t).slice(1).forEach((function(t){return O(t,e)})),a.header.push(e)}(),r.startsWith("S")){var c=r.split("\t"),l=Object(v.a)(c),o=l[1],i=l.slice(2),s=0,u="",m=void 0,h=!1;+i[0]?(s=+i[0],u=i[1],m=i.slice(2)):(h=!0,s=(u=i[0]).length,m=i.slice(1));for(var d={},f=0;f<m.length;f++)O(i[f],d);h&&d.LN&&(s=d.LN),a.nodes.push({id:o,length:s,sequence:u,tags:d})}else if(r.startsWith("E")){for(var g=r.split("\t"),p=Object(v.a)(g),b=(p[1],p[2]),E=p[3],j=(p[4],p[5],p[6],p[7],p[8]),w=p.slice(9),y=b.slice(0,-1),C=E.slice(0,-1),S=b.charAt(b.length-1),x=b.charAt(E.length-1),T={},L=0;L<w.length;L++)O(w[L],T);a.links.push({source:y,target:C,strand1:S,strand2:x,cigar:j,tags:T})}else if(r.startsWith("L")){for(var G=r.split("\t"),M=Object(v.a)(G),H=M[1],B=M[2],F=M[3],N=M[4],q=M[5],z=M.slice(6),W={},A=0;A<z.length;A++)O(z[A],W);a.links.push({source:H,target:F,strand1:B,strand2:N,cigar:q,tags:W})}else if(r.startsWith("P")){var D=r.split("\t"),I=Object(v.a)(D),P=I[1],R=I[2],_=I.slice(3);a.paths.push({name:P,path:R,rest:_})}}}catch(X){n.e(X)}finally{n.f()}return a}(h):void 0}),[h]);return r.a.createElement("div",null,r.a.createElement(A,{onData:function(e){F({dataset:e}),y()},onGraph:function(e){d(e)},onSettings:function(e){F(e),y()},onExportSVG:function(){I()(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var a="".concat(window.location.href,"#"),n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);n.nextNode();){var r,c=Object(k.a)(n.currentNode.attributes);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.value.includes(a)&&(l.value=l.value.replace(a,"#"))}}catch(i){c.e(i)}finally{c.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var o=(new window.XMLSerializer).serializeToString(e);return new Blob([o],{type:"image/svg+xml"})}(_.current))},settings:R}),a?r.a.createElement(g,{data:a,onModal:function(e){c(e)},onHide:function(){c(void 0)}}):null,r.a.createElement("div",{className:"flexcontainer"},r.a.createElement("div",{id:"sidebar",className:"sidebar"},r.a.createElement(T,{colorScheme:W,drawPaths:z,drawLabels:q,drag:D,onColorChange:function(e){F({colorScheme:e}),y()},onDrawLabels:function(e){F({drawLabels:e}),y()},onDrag:function(e){F({drag:e}),y()},onPathDraw:function(e){F({drawPaths:e}),y()},onRedraw:function(){return G((function(e){return e+1}))}})),r.a.createElement("div",{className:"body"},b?r.a.createElement("div",{style:{color:"red"}},b):null,X?r.a.createElement(C,{graph:X,ref:_,redraw:L,drag:D,color:W,drawLabels:q,drawPaths:z,onFeatureClick:function(e){c(e)},settings:R}):null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P.c,null,r.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.1d06079b.chunk.js.map