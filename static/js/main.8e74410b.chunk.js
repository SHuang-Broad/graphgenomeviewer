(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),i=n(21),s=n.n(i),o=(n(94),n(24)),l=n.n(o),u=n(54),j=n(52),d=n(10),h=n(134),b=n(78);function O(e){var t=e.data,n=e.onHide;return Object(a.jsxs)(h.a,{show:!0,onHide:n,children:[Object(a.jsx)(h.a.Header,{closeButton:!0,children:Object(a.jsx)(h.a.Title,{children:"Feature details"})}),Object(a.jsxs)(h.a.Body,{children:[Object(a.jsx)("div",{children:"Attributes"}),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)("div",{style:{display:"flex",maxHeight:150,margin:3},children:[Object(a.jsx)("div",{style:{backgroundColor:"#dda",minWidth:100},children:n}),Object(a.jsx)("div",{style:{wordBreak:"break-word",overflow:"auto"},children:String(c)})]},"".concat(n,"_").concat(c))})),Object(a.jsx)("hr",{}),t.tags&&Object.keys(t.tags).length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Tags"}),Object.entries(t.tags).map((function(e){var t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)("div",{style:{display:"flex",maxHeight:150,margin:3},children:[Object(a.jsx)("div",{style:{backgroundColor:"#dda",minWidth:100},children:n}),Object(a.jsx)("div",{style:{wordBreak:"break-word",overflow:"auto"},children:String(c)})]},"".concat(n,"_").concat(c))}))]}):null,Object(a.jsx)(h.a.Footer,{children:Object(a.jsx)(b.a,{variant:"secondary",onClick:n,children:"Close"})})]})]})}var f=n(87),p=n(8),g=n(28),x=n(131),m=n(126),v=n(73),k=n(127),w=n(135),y=n(128),C=n(129),S=n(130),T=n(76),L=n(86),E=n(85),G=n(137);function H(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push([a.source.x,a.source.y])}var c=e[n-1];return t.push([c.target.x,c.target.y]),t}function M(e,t){var n;return(n="linkNum",e.reduce((function(e,t){var a=n instanceof Function?n(t):t[n];if(void 0!==a){var c=e.find((function(e){return e&&e.key===a}));c?c.values.push(t):e.push({key:a,values:[t]})}return e}),[])).map((function(e){return{links:H(e.values),original:t[e.key]}}))}function B(e,t,n,a,c){var r=Math.sqrt(Math.pow(a-t,2)+Math.pow(n-e,2));return[n+c*((n-e)/r),a+c*((a-t)/r)]}var F=T.a;function N(e){var t=e.path,n=e.drawLabels,a=e.sequenceThickness,c=e.stroke,i=e.onFeatureClick,s=G.a().context(null),o=t.links[0],l=t.links[1],u=t.links[t.links.length-1],j=t.links[t.links.length-2],h=B(l[0],l[1],o[0],o[1],100),b=Object(d.a)(h,2),O=b[0],p=b[1],g=B(j[0],j[1],u[0],u[1],100),x=Object(d.a)(g,2),m=x[0],v=x[1],k=s([[O,p]].concat(Object(f.a)(t.links),[[m,v]]));return r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:t.original.id,d:s(t.links),strokeWidth:a,stroke:c,fill:"none",onClick:function(){return i(t.original)}},r.a.createElement("title",null,t.original.id)),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:"".concat(t.original.id,"_invisible"),d:k,fill:"none"}),r.a.createElement("text",{dy:12},r.a.createElement("textPath",{startOffset:"50%",textAnchor:"middle",href:"#".concat(t.original.id,"_invisible")},t.original.id))):null)}var q=r.a.forwardRef((function(e,t){var n=Object(c.useRef)(),a=e.graph,i=e.drawPaths,s=void 0!==i&&i,o=e.drawLabels,l=void 0!==o&&o,u=e.drag,h=void 0!==u&&u,b=e.settings,O=b.chunkSize,f=void 0===O?1e3:O,T=b.forceSteps,H=void 0===T?500:T,q=b.linkSteps,z=void 0===q?3:q,A=b.sequenceThickness,D=void 0===A?10:A,I=b.linkThickness,P=void 0===I?2:I,R=b.theta,W=void 0===R?.9:R,_=b.forceType,J=void 0===_?"center":_,X=b.strengthCenter,Y=void 0===X?-50:X,U=b.strengthXY,V=void 0===U?.3:U,Z=e.color,K=void 0===Z?"Rainbow":Z,Q=e.width,$=void 0===Q?2e3:Q,ee=e.height,te=void 0===ee?1e3:ee,ne=e.redraw,ae=void 0===ne?0:ne,ce=e.onFeatureClick,re=void 0===ce?function(){console.log("no feature click configured")}:ce,ie=Object(c.useRef)(Object(E.a)().extent([[0,0],[$,te]]).scaleExtent([.1,8])),se=Object(c.useMemo)((function(){return function(e,t){for(var n={nodes:[],links:[]},a={},c=0;c<(e.paths||{}).length;c++)for(var r=e.paths[c],i=r.path.split(","),s=0;s<i.length-1;s++){var o="".concat(i[s],"_").concat(i[s+1]);a[o]?a[o].push(r.name):a[o]=[r.name]}for(var l=0;l<e.nodes.length;l++){var u=e.nodes[l],d=u.id,h=u.sequence,b=u.length,O=Object(j.a)(u,["id","sequence","length"]),f=[];f.push(Object(p.a)(Object(p.a)({},O),{},{id:"".concat(d,"-start")}));for(var g=t;g<b-t;g+=t)f.push(Object(p.a)(Object(p.a)({},O),{},{id:"".concat(d,"-").concat(g)}));f.push(Object(p.a)(Object(p.a)({},O),{},{id:"".concat(d,"-end")}));for(var x=0;x<f.length-1;x++){var m=f[x].id,v=f[x+1].id;n.links.push(Object(p.a)(Object(p.a)({},O),{},{source:m,target:v,id:d,length:b,sequence:h,linkNum:l}))}n.nodes=n.nodes.concat(f)}for(var k=0;k<e.links.length;k++){var w=e.links[k],y=w.strand1,C=w.strand2,S=w.source,T=w.target,L=Object(j.a)(w,["strand1","strand2","source","target"]),E=a["".concat(S).concat(y,"_").concat(T).concat(C)]||[],G=S===T,H=Object(p.a)({source:"".concat(S,"-").concat("+"===y?"end":"start"),target:"".concat(T,"-").concat("+"===C?"start":"end")},L);G&&(H.loop=!0),E.length&&(H.paths=E),n.links.push(H)}return n}(a,f)}),[f,a]),oe=Object(c.useMemo)((function(){return Object.fromEntries((a.paths||[]).map((function(e,t){return[e.name,F[t]]})))}),[a.paths]),le=Object(c.useMemo)((function(){var e=se.links.map((function(e){return Object.create(Object(p.a)(Object(p.a)({},e),{},{x:Math.random(),y:Math.random()}))})),t=se.nodes.map((function(e){return Object.create(Object(p.a)(Object(p.a)({},e),{},{x:Math.random(),y:Math.random()}))})),n=Object(v.a)(t).force("link",Object(k.a)(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10})).iterations(z)).force("charge",Object(w.a)().strength(Y).theta(W));"center"===J?n.force("center",Object(y.a)($/3,te/3)):"xy"===J&&n.force("x",Object(C.a)().x($/3).strength(V)).force("y",Object(S.a)().y(te/3).strength(V));for(var a=0;a<H;++a)n.tick();return e}),[se.links,se.nodes,z,Y,W,J,ae,$,te,V,H]);Object(c.useEffect)((function(){var e=Object(m.a)(t.current);h?e.call(ie.current.on("zoom",(function(e){Object(m.a)(n.current).attr("transform",e.transform)}))):e.on(".zoom",null)}),[h,te,t,$,ie]);for(var ue=M(le,a.nodes),je=function(e,t){for(var n=[],a=0;a<e.length;a++){var c=e[a],r=t[a];r.id||n.push({links:[[c.source.x,c.source.y],[c.target.x,c.target.y]],original:r})}return n}(le,se.links),de={},he=0;he<ue.length;he++){var be=ue[he],Oe=be.links.length;de["".concat(be.original.id,"-start")]=[be.links[1],be.links[0]],de["".concat(be.original.id,"-end")]=[be.links[Oe-2],be.links[Oe-1]]}return r.a.createElement("svg",{width:"100%",height:"100%",ref:t,style:{fontSize:10},viewBox:[0,0,$,te].toString()},r.a.createElement("g",{ref:n},je.map((function(e,t){var n=e.links[0][0],a=e.links[0][1],c=e.links[1][0],i=e.links[1][1];if(s){var o=Object(d.a)(de[e.original.source],2),l=o[0],u=o[1],j=Object(d.a)(de[e.original.target],2),h=j[0],b=j[1],O=(i-a)/(c-n),f=(l[1]-u[1])/(l[0]-u[0]),p=(h[1]-b[1])/(h[0]-b[0]);return Math.abs(O-f)<.2||Math.abs(O-p)<.2?e.original.paths?e.original.paths.map((function(t,s){var o=c-n,l=i-a,u=Math.sqrt(o*o+l*l)+40*Math.random(),j=s%2,d="M".concat(n,",").concat(a,"A").concat(u,",").concat(u," 0 0,").concat(j," ").concat(c,",").concat(i);return r.a.createElement("path",{key:"".concat(d,"-").concat(s),d:d,strokeWidth:P,stroke:oe[t],fill:"none",onClick:function(){return re(e.original)}},r.a.createElement("title",null,t))})):null:e.original.paths?e.original.paths.map((function(t,s){var o=B(l[0],l[1],u[0],u[1],60+30*s),j=Object(d.a)(o,2),O=j[0],f=j[1],p=B(h[0],h[1],b[0],b[1],60+30*s),g=Object(d.a)(p,2),m=g[0],v=g[1],k=Object(x.a)();return k.moveTo(n,a),k.bezierCurveTo(O,f,m,v,c,i),r.a.createElement("path",{key:"".concat(k.toString(),"-").concat(s),d:k,strokeWidth:P,stroke:oe[t],fill:"none",onClick:function(){return re(e.original)}},r.a.createElement("title",null,t))})):null}var g=Object(d.a)(de[e.original.source],2),m=g[0],v=g[1],k=Object(d.a)(de[e.original.target],2),w=k[0],y=k[1],C=(i-a)/(c-n),S=(m[1]-v[1])/(m[0]-v[0]),T=(w[1]-y[1])/(w[0]-y[0]),L=G.a().context(null),E=e.original.loop&&!(C-S<.5||C-T<.5)?"M".concat(n,",").concat(a,"A").concat(-30,",").concat(-20," ").concat(90,",").concat(1,",").concat(0," ").concat(c,",").concat(i):L(e.links);return r.a.createElement("path",{key:"".concat(E.toString(),"-").concat(t),d:E,strokeWidth:P,stroke:"black",fill:"none",onClick:function(){return re(e.original)}})})),ue.map((function(e,t){var n=K.startsWith("Just")?K.replace("Just","").toLowerCase():Object(g.f)(L["interpolate".concat(K)](t/ue.length)).darker();return r.a.createElement(N,{key:e.original.id,sequenceThickness:D,drawLabels:l,path:e,stroke:n,onFeatureClick:re})}))))})),z=n(136);function A(e){var t=e.onDrawLabels,n=e.drawLabels,c=e.drawPaths,r=e.drag,i=e.onDrag,s=e.onColorChange,o=e.onPathDraw,l=e.onRedraw,u=e.colorScheme;return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Settings"}),Object(a.jsx)(z.a.Label,{children:"Color"}),Object(a.jsxs)(z.a.Control,{value:u,onChange:function(e){return s(e.target.value)},as:"select",children:[Object(a.jsx)("option",{children:"JustGrey"}),Object(a.jsx)("option",{children:"Turbo"}),Object(a.jsx)("option",{children:"Rainbow"}),Object(a.jsx)("option",{children:"Spectral"}),Object(a.jsx)("option",{children:"Viridis"}),Object(a.jsx)("option",{children:"RdYlBu"})]}),Object(a.jsx)("br",{}),Object(a.jsx)(z.a.Group,{children:Object(a.jsx)(z.a.Check,{onChange:function(e){o(e.target.checked)},type:"checkbox",label:"Draw paths",checked:c})}),Object(a.jsx)(z.a.Group,{children:Object(a.jsx)(z.a.Check,{onChange:function(e){t(e.target.checked)},type:"checkbox",label:"Draw labels",checked:n})}),Object(a.jsx)(z.a.Group,{children:Object(a.jsx)(z.a.Check,{onChange:function(e){i(e.target.checked)},type:"checkbox",label:"Enable panning/zooming?",checked:r})}),Object(a.jsx)("br",{}),Object(a.jsx)(b.a,{onClick:function(){return l()},children:"Redraw"})]})}var D=n(138),I=n(139),P=n(133),R=n(132),W=n(82);function _(e){var t=e.onHide,n=e.settings,r=e.onSettings,i=Object(c.useState)(n),s=Object(d.a)(i,2),o=s[0],l=s[1],u=o.chunkSize,j=o.forceSteps,O=o.linkSteps,f=o.strengthCenter,g=o.strengthXY,x=o.forceType,m=o.theta,v=o.sequenceThickness,k=o.linkThickness;return Object(a.jsxs)(h.a,{show:!0,onHide:t,size:"lg",children:[Object(a.jsx)(h.a.Header,{closeButton:!0,children:Object(a.jsx)(h.a.Title,{children:"Settings"})}),Object(a.jsx)(h.a.Body,{children:Object(a.jsxs)(z.a,{onSubmit:function(e){e.preventDefault(),r(Object(p.a)(Object(p.a)({},o),{},{chunkSize:+u,forceType:x,forceSteps:+j,linkSteps:+O,strengthCenter:+f,theta:+m,sequenceThickness:+v,linkThickness:+k})),t()},children:[Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Number of simulation steps for the nodes",Object(a.jsx)(z.a.Text,{muted:!0,children:"Used in the force-based layout simulation"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:j,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{forceSteps:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Number of simulation steps for the links",Object(a.jsx)(z.a.Text,{muted:!0,children:"Increases the rigidity of the link based constraints"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:O,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{linkSteps:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Sequence chunk size",Object(a.jsx)(z.a.Text,{muted:!0,children:"If a contig is of length 5000, then chunk length 1000 would become 5 segments. Note that contigs smaller than the chunk length may not be proportionally sized"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:u,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{chunkSize:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Theta",Object(a.jsx)(z.a.Text,{muted:!0,children:"Parameter for the force directed layout"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:m,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{theta:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Strength (force xy)",Object(a.jsx)(z.a.Text,{muted:!0,children:"This parameter should be between [0,1], applies to the XY layout"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:g,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{strengthXY:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Strength (particle charge)",Object(a.jsx)(z.a.Text,{muted:!0,children:"This value is like a charged particle force, by being negative it keeps things farther apart"})]}),Object(a.jsx)(W.a,{children:Object(a.jsx)(z.a.Control,{type:"number",value:f,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{strengthCenter:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsxs)(z.a.Label,{column:!0,sm:"4",children:["Force type",Object(a.jsx)(z.a.Text,{muted:!0,children:"Force XY results in a circular style layout that can be helpful for more disjoint graphs, force center is default"})]}),Object(a.jsx)(W.a,{children:Object(a.jsxs)(z.a.Control,{value:x,onChange:function(e){return l((function(t){return Object(p.a)(Object(p.a)({},t),{},{forceType:e.target.value})}))},as:"select",children:[Object(a.jsx)("option",{children:"center"}),Object(a.jsx)("option",{children:"xy"})]})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsx)(z.a.Label,{column:!0,sm:"4",children:"Sequence thickness"}),Object(a.jsx)(W.a,{children:Object(a.jsx)("input",{type:"range",min:1,max:100,style:{width:"100%"},value:v,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{sequenceThickness:t})}))}})})]}),Object(a.jsxs)(z.a.Group,{as:R.a,children:[Object(a.jsx)(z.a.Label,{column:!0,sm:"4",children:"Link thickness"}),Object(a.jsx)(W.a,{children:Object(a.jsx)("input",{type:"range",min:1,max:100,style:{width:"100%"},value:k,onChange:function(e){var t=e.target.value;l((function(e){return Object(p.a)(Object(p.a)({},e),{},{linkThickness:t})}))}})})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}var J=n(83);function X(e){var t=e.onHide;return Object(a.jsxs)(h.a,{show:!0,onHide:t,children:[Object(a.jsx)(h.a.Header,{closeButton:!0,children:Object(a.jsxs)(h.a.Title,{children:["graphgenome browser ",J.version]})}),Object(a.jsxs)(h.a.Body,{children:[Object(a.jsx)("p",{children:"This is a small demo of browsing simple graph genomes. The app can read GFA format URLs and local files, all processing is done client side currently."}),Object(a.jsxs)("p",{children:["Contact ",Object(a.jsx)("a",{href:"mainto:colin.diesh@gmail.com",children:"Colin Diesh"})]}),Object(a.jsxs)("p",{children:["Thanks to the BCC2020 pangenome team, and"," ",Object(a.jsx)("a",{href:"https://github.com/rrwick/Bandage",children:"Bandage"})," for inspiration."]}),Object(a.jsx)("p",{children:"Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and gfalint (Shaun Jackman)"}),Object(a.jsx)("p",{children:"This app attempts to support GFA2 but does not properly render fragments, intricate edge details, or U and O paths"}),Object(a.jsx)("a",{href:"https://github.com/cmdcolin/graphgenomeviewer",children:"GitHub"})]})]})}function Y(e){var t=e.onHide,n=e.onData,r=Object(c.useState)(),i=Object(d.a)(r,2),s=i[0],o=i[1];return Object(a.jsxs)(h.a,{show:!0,onHide:t,children:[Object(a.jsx)(h.a.Header,{closeButton:!0,children:Object(a.jsx)(h.a.Title,{children:"graphgenome browser"})}),Object(a.jsx)(h.a.Body,{children:Object(a.jsxs)(z.a,{onSubmit:function(){n(s),t()},children:[Object(a.jsxs)(z.a.Group,{children:[Object(a.jsx)(z.a.Label,{children:"Enter URL"}),Object(a.jsx)(z.a.Control,{type:"input",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}function U(e){var t=e.onHide,n=e.onGraph,r=Object(c.useRef)();return Object(a.jsxs)(h.a,{show:!0,onHide:t,children:[Object(a.jsx)(h.a.Header,{closeButton:!0,children:Object(a.jsx)(h.a.Title,{children:"Open file"})}),Object(a.jsx)(h.a.Body,{children:Object(a.jsxs)(z.a,{onSubmit:function(){var e=Object(u.a)(l.a.mark((function e(a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,r.current.files[0].text();case 3:c=e.sent,n(c),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsxs)(z.a.Group,{children:[Object(a.jsx)(z.a.Label,{children:"Open file"}),Object(a.jsx)(z.a.Control,{ref:r,type:"file"})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}function V(e){var t=e.onData,n=e.settings,r=e.onGraph,i=e.onExportSVG,s=e.onSettings,o=Object(c.useState)(),l=Object(d.a)(o,2),u=l[0],j=l[1],h=Object(c.useState)(),b=Object(d.a)(h,2),O=b[0],f=b[1],p=Object(c.useState)(),g=Object(d.a)(p,2),x=g[0],m=g[1],v=Object(c.useState)(),k=Object(d.a)(v,2),w=k[0],y=k[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(D.a.Brand,{href:"#home",children:"graphgenome browser"}),Object(a.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(D.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(I.a,{className:"mr-auto",children:[Object(a.jsxs)(P.a,{title:"File",id:"basic-nav-dropdown",children:[Object(a.jsx)(P.a.Item,{onClick:function(){return m(!0)},children:"Open URL"}),Object(a.jsx)(P.a.Item,{onClick:function(){return y(!0)},children:"Open file"}),Object(a.jsx)(P.a.Item,{onClick:function(){return i()},children:"Export SVG"})]}),Object(a.jsxs)(P.a,{title:"Examples",id:"basic-nav-dropdown",children:[Object(a.jsx)(P.a.Item,{onClick:function(){return t("MT.gfa")},children:"MT GFA-spec example"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("toy_pangenome.gfa")},children:"Paths example"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("example1.gfa")},children:"Paths example 2"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("big1.gfa")},children:"Big1"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("ir1.gfa")},children:"Ir1"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("test_contig_placement_assembly_graph.gfa")},children:"Unicycler example"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("circle.gfa")},children:"Simple circle"}),Object(a.jsx)(P.a.Item,{onClick:function(){return t("example1.gfa2")},children:"GFA2.0 example"})]}),Object(a.jsx)(I.a.Link,{onClick:function(){f(!0)},children:"Settings"}),Object(a.jsx)(I.a.Link,{onClick:function(){j(!0)},children:"About"})]})})]}),u?Object(a.jsx)(X,{onHide:function(){return j(!1)}}):null,O?Object(a.jsx)(_,{settings:n,onHide:function(){return f(!1)},onSettings:s}):null,x?Object(a.jsx)(Y,{onData:t,onHide:function(){return m(!1)}}):null,w?Object(a.jsx)(U,{onGraph:r,onHide:function(){return y(!1)}}):null]})}var Z=n(46),K=n(51);function Q(e,t){var n=e.split(":"),a=Object(d.a)(n,3),c=a[0],r=a[1],i=a[2];"i"===r?t[c]=+i:"Z"===r&&(t[c]=i)}var $=n(84),ee=n.n($),te=n(9);n(113),n(114);var ne=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(),o=Object(d.a)(s,2),h=o[0],b=o[1],f=Object(c.useState)(),p=Object(d.a)(f,2),g=p[0],x=p[1],m=Object(c.useState)(),v=Object(d.a)(m,2)[1],k=r.a.useCallback((function(){return v({})}),[]),w=Object(c.useState)(0),y=Object(d.a)(w,2),C=y[0],S=y[1],T=Object(te.e)({strengthCenter:Object(te.f)(te.b,-50),strengthXY:Object(te.f)(te.b,.1),chunkSize:Object(te.f)(te.b,1e3),forceSteps:Object(te.f)(te.b,200),linkSteps:Object(te.f)(te.b,1),sequenceThickness:Object(te.f)(te.b,10),linkThickness:Object(te.f)(te.b,2),theta:Object(te.f)(te.b,.9),forceType:Object(te.f)(te.d,"center"),dataset:Object(te.f)(te.d,"MT.gfa"),colorScheme:Object(te.f)(te.d,"Rainbow"),drawLabels:Object(te.f)(te.a,!1),drawPaths:Object(te.f)(te.a,!1),drag:Object(te.f)(te.a,!0)}),L=Object(d.a)(T,2),E=L[0],G=L[1],H=E.dataset,M=E.drawLabels,B=E.drawPaths,F=E.colorScheme,N=E.drag,z=Object(j.a)(E,["dataset","drawLabels","drawPaths","colorScheme","drag"]),D=Object(c.useRef)();Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(H);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch ".concat(t.statusText));case 6:return e.next=8,t.text();case 8:n=e.sent,b(n),x(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),x(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[H]);var I=Object(c.useMemo)((function(){return h?function(e){var t,n={nodes:[],links:[],paths:[],header:[]},a=Object(K.a)(e.split("\n"));try{for(a.s();!(t=a.n()).done;){var c=t.value;if(c.startsWith("H")&&function(){var e={},t=c.split("\t");Object(Z.a)(t).slice(1).forEach((function(t){return Q(t,e)})),n.header.push(e)}(),c.startsWith("S")){var r=c.split("\t"),i=Object(Z.a)(r),s=i[1],o=i.slice(2),l=0,u="",j=void 0,d=!1;+o[0]?(l=+o[0],u=o[1],j=o.slice(2)):(d=!0,l=(u=o[0]).length,j=o.slice(1));for(var h={},b=0;b<j.length;b++)Q(o[b],h);d&&h.LN&&(l=h.LN),n.nodes.push({id:s,length:l,sequence:u,tags:h})}else if(c.startsWith("E")){for(var O=c.split("\t"),f=Object(Z.a)(O),p=f[2],g=f[3],x=f[8],m=f.slice(9),v=p.slice(0,-1),k=g.slice(0,-1),w=p.charAt(p.length-1),y=p.charAt(g.length-1),C={},S=0;S<m.length;S++)Q(m[S],C);n.links.push({source:v,target:k,strand1:w,strand2:y,cigar:x,tags:C})}else if(c.startsWith("L")){for(var T=c.split("\t"),L=Object(Z.a)(T),E=L[1],G=L[2],H=L[3],M=L[4],B=L[5],F=L.slice(6),N={},q=0;q<F.length;q++)Q(F[q],N);n.links.push({source:E,target:H,strand1:G,strand2:M,cigar:B,tags:N})}else if(c.startsWith("P")){var z=c.split("\t"),A=Object(Z.a)(z),D=A[1],I=A[2],P=A.slice(3);n.paths.push({name:D,path:I,rest:P})}}}catch(R){a.e(R)}finally{a.f()}return n}(h):void 0}),[h]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(V,{onData:function(e){G({dataset:e}),k()},onGraph:function(e){b(e)},onSettings:function(e){G(e),k()},onExportSVG:function(){ee()(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var n="".concat(window.location.href,"#"),a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();){var c,r=Object(K.a)(a.currentNode.attributes);try{for(r.s();!(c=r.n()).done;){var i=c.value;i.value.includes(n)&&(i.value=i.value.replace(n,"#"))}}catch(o){r.e(o)}finally{r.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var s=(new window.XMLSerializer).serializeToString(e);return new Blob([s],{type:"image/svg+xml"})}(D.current))},settings:z}),n?Object(a.jsx)(O,{data:n,onModal:function(e){i(e)},onHide:function(){i(void 0)}}):null,Object(a.jsxs)("div",{className:"flexcontainer",children:[Object(a.jsx)("div",{id:"sidebar",className:"sidebar",children:Object(a.jsx)(A,{colorScheme:F,drawPaths:B,drawLabels:M,drag:N,onColorChange:function(e){G({colorScheme:e}),k()},onDrawLabels:function(e){G({drawLabels:e}),k()},onDrag:function(e){G({drag:e}),k()},onPathDraw:function(e){G({drawPaths:e}),k()},onRedraw:function(){return S((function(e){return e+1}))}})}),Object(a.jsxs)("div",{className:"body",children:[g?Object(a.jsx)("div",{style:{color:"red"},children:g}):null,I?Object(a.jsx)(q,{graph:I,ref:D,redraw:C,drag:N,color:F,drawLabels:M,drawPaths:B,onFeatureClick:function(e){i(e)},settings:z}):null]})]})]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(te.c,{children:Object(a.jsx)(ne,{})})}),document.getElementById("root"))},83:function(e){e.exports=JSON.parse('{"name":"app","version":"1.0.0","private":true,"dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","bootstrap":"^4.6.0","file-saver":"^2.0.5","graphgenomeviewer":"^1.0.0","gh-pages":"^3.1.0","query-string":"^6.13.8","react":"^17.0.1","react-bootstrap":"^1.4.3","react-dom":"^17.0.1","react-scripts":"4.0.1","use-query-params":"^1.1.9","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"yarn build","deploy":"gh-pages -d build","lint":"eslint src"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},94:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.8e74410b.chunk.js.map