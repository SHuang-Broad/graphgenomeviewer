{"version":3,"sources":["FeatureDialog.js","util.js","Graph.js","Sidebar.js","SettingsDialog.js","Header.js","App.js","serviceWorker.js","index.js"],"names":["FeatureDialog","data","onHide","Modal","show","Header","closeButton","Title","Body","Object","entries","filter","entry","includes","map","key","value","style","display","maxHeight","margin","backgroundColor","minWidth","wordBreak","overflow","String","tags","keys","length","Footer","Button","variant","onClick","parseTag","tag","split","name","type","val","makePath","edges","path","i","st","push","source","x","y","last","target","generatePaths","graph","reduce","rv","v","Function","undefined","el","find","r","values","links","original","projectLine","x1","y1","x2","y2","dt","d","Math","sqrt","Graph","React","forwardRef","props","ref","gref","useRef","drawPaths","drawLabels","drag","settings","chunkSize","forceSteps","linkSteps","sequenceThickness","linkThickness","theta","forceType","strengthCenter","strengthXY","color","width","height","redraw","onFeatureClick","console","log","zoom","d3","extent","scaleExtent","useMemo","G","Gp","nodes","seen","paths","pathNodes","j","curr","id","sequence","rest","linkNum","concat","strand1","strand2","loop","link","reprocessGraph","colors","fromEntries","p","create","random","simulation","force","distance","iterations","strength","tick","useEffect","svg","current","call","on","attr","transform","result","generateEdges","nodePathMap","l","fontSize","viewBox","toString","s1","t1","s2","t2","m1","m2","m3","abs","pp","index","dx","dy","dr","sweep","cpath","strokeWidth","stroke","fill","cx1","cy1","cx2","cy2","moveTo","bezierCurveTo","line","context","startsWith","replace","toLowerCase","darker","Path","invisibleTextPath","startOffset","textAnchor","href","Sidebar","onDrawLabels","onDrag","onColorChange","onPathDraw","onRedraw","colorScheme","Form","Label","Control","onChange","event","as","Group","Check","checked","label","SettingsDialog","paramSettings","onSettings","useState","setSettings","size","onSubmit","preventDefault","Row","column","sm","Text","muted","Col","min","max","AboutDialog","OpenURLDialog","onData","setValue","OpenFileDialog","onGraph","a","files","text","onExportSVG","showAbout","setShowAbout","showSettings","setShowSettings","showOpenURL","setShowOpenURL","showOpenFile","setShowOpenFile","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","Nav","className","NavDropdown","title","Item","Link","App","featureData","setFeatureData","setData","error","setError","updateState","forceUpdate","useCallback","setRedraw","useQueryParams","withDefault","NumberParam","StringParam","dataset","BooleanParam","query","setQuery","fetch","ok","Error","statusText","message","file","header","headerLine","forEach","len","seq","tagfields","gfa1","slice","LN","cigar","source1","target1","charAt","parseGFA","saveAs","xmlns","cloneNode","fragment","window","location","walker","document","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextNode","currentNode","attributes","setAttributeNS","string","XMLSerializer","serializeToString","Blob","serialize","onModal","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.aa9a18f0.chunk.js","sourcesContent":["import React from 'react'\nimport { Button, Modal } from 'react-bootstrap'\n\nexport function FeatureDialog({ data, onHide }) {\n  return (\n    <Modal show={true} onHide={onHide}>\n      <Modal.Header closeButton>\n        <Modal.Title>Feature details</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <div>Attributes</div>\n        {Object.entries(data)\n          .filter(entry => !['source', 'target', 'linkNum', 'tags'].includes(entry[0]))\n          .map(([key, value]) => (\n            <div\n              key={`${key}_${value}`}\n              style={{ display: 'flex', maxHeight: 150, margin: 3 }}\n            >\n              <div style={{ backgroundColor: '#dda', minWidth: 100 }}>{key}</div>\n              <div style={{ wordBreak: 'break-word', overflow: 'auto' }}>\n                {String(value)}\n              </div>\n            </div>\n          ))}\n        <hr />\n        {data.tags && Object.keys(data.tags).length ? (\n          <>\n            <div>Tags</div>\n            {Object.entries(data.tags).map(([key, value]) => (\n              <div\n                key={`${key}_${value}`}\n                style={{ display: 'flex', maxHeight: 150, margin: 3 }}\n              >\n                <div style={{ backgroundColor: '#dda', minWidth: 100 }}>{key}</div>\n                <div style={{ wordBreak: 'break-word', overflow: 'auto' }}>\n                  {String(value)}\n                </div>\n              </div>\n            ))}\n          </>\n        ) : null}\n\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={onHide}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","function parseTag(tag, tags) {\n  const [name, type, val] = tag.split(':')\n  if (type === 'i') {\n    tags[name] = +val\n  } else if (type === 'Z') {\n    tags[name] = val\n  }\n}\n\nexport function parseGFA(file) {\n  const graph = { nodes: [], links: [], paths: [], header: [] }\n  for (const line of file.split('\\n')) {\n    if (line.startsWith('H')) {\n      const headerLine = {}\n      const [, ...rest] = line.split('\\t')\n      rest.forEach(tag => parseTag(tag, headerLine))\n      graph.header.push(headerLine)\n    }\n    if (line.startsWith('S')) {\n      const [, name, ...rest] = line.split('\\t')\n      let len = 0\n      let seq = ''\n      let tagfields\n      let gfa1 = false\n      if (+rest[0]) {\n        len = +rest[0]\n        seq = rest[1]\n        tagfields = rest.slice(2)\n      } else {\n        gfa1 = true\n        seq = rest[0]\n        len = seq.length\n        tagfields = rest.slice(1)\n      }\n      const tags = {}\n      for (let i = 0; i < tagfields.length; i++) {\n        parseTag(rest[i], tags)\n      }\n      if (gfa1 && tags.LN) {\n        len = tags.LN\n      }\n      graph.nodes.push({ id: name, length: len, sequence: seq, tags })\n    } else if (line.startsWith('E')) {\n      // eslint-disable-next-line no-unused-vars\n      const [, edgeId, source, target, s1, e1, b2, e2, cigar, ...rest] = line.split('\\t')\n      const source1 = source.slice(0, -1)\n      const target1 = target.slice(0, -1)\n      const strand1 = source.charAt(source.length - 1)\n      const strand2 = source.charAt(target.length - 1)\n      const tags = {}\n      for (let i = 0; i < rest.length; i++) {\n        parseTag(rest[i], tags)\n      }\n\n      graph.links.push({\n        source: source1,\n        target: target1,\n        strand1,\n        strand2,\n        cigar,\n        tags,\n      })\n    } else if (line.startsWith('L')) {\n      const [, source, strand1, target, strand2, cigar, ...rest] = line.split('\\t')\n      const tags = {}\n      for (let i = 0; i < rest.length; i++) {\n        parseTag(rest[i], tags)\n      }\n      graph.links.push({ source, target, strand1, strand2, cigar, tags })\n    } else if (line.startsWith('P')) {\n      const [, name, path, ...rest] = line.split('\\t')\n\n      graph.paths.push({ name, path, rest })\n    }\n  }\n  return graph\n}\n// adapted from https://observablehq.com/@mbostock/saving-svg\nexport function serialize(svg) {\n  const xmlns = 'http://www.w3.org/2000/xmlns/'\n  const xlinkns = 'http://www.w3.org/1999/xlink'\n  const svgns = 'http://www.w3.org/2000/svg'\n\n  svg = svg.cloneNode(true)\n  const fragment = `${window.location.href}#`\n  const walker = document.createTreeWalker(svg, NodeFilter.SHOW_ELEMENT, null, false)\n  while (walker.nextNode()) {\n    for (const attr of walker.currentNode.attributes) {\n      if (attr.value.includes(fragment)) {\n        attr.value = attr.value.replace(fragment, '#')\n      }\n    }\n  }\n  svg.setAttributeNS(xmlns, 'xmlns', svgns)\n  svg.setAttributeNS(xmlns, 'xmlns:xlink', xlinkns)\n  const serializer = new window.XMLSerializer()\n  const string = serializer.serializeToString(svg)\n  return new Blob([string], { type: 'image/svg+xml' })\n}\n\n// Given a GFA graph with sequence nodes ('S' tags), it breaks the S tags into\n// multiple nodes depending on how long the sequence is, which gives the graph\n// an organic look when the layout algorithm is applied\nexport function reprocessGraph(G, chunkSize) {\n  const Gp = { nodes: [], links: [] }\n\n  const seen = {}\n  for (let i = 0; i < (G.paths || {}).length; i++) {\n    const path = G.paths[i]\n    const pathNodes = path.path.split(',')\n    for (let j = 0; j < pathNodes.length - 1; j++) {\n      const curr = `${pathNodes[j]}_${pathNodes[j + 1]}`\n      if (!seen[curr]) {\n        seen[curr] = [path.name]\n      } else {\n        seen[curr].push(path.name)\n      }\n    }\n  }\n\n  for (let i = 0; i < G.nodes.length; i++) {\n    const { id, sequence, length, ...rest } = G.nodes[i]\n    const nodes = []\n\n    // break long sequence into multiple nodes, for organic layout\n    nodes.push({ ...rest, id: `${id}-start` })\n    for (let i = chunkSize; i < length - chunkSize; i += chunkSize) {\n      nodes.push({ ...rest, id: `${id}-${i}` })\n    }\n    nodes.push({ ...rest, id: `${id}-end` })\n\n    // recreate links\n    for (let j = 0; j < nodes.length - 1; j++) {\n      const source = nodes[j].id\n      const target = nodes[j + 1].id\n      Gp.links.push({\n        ...rest,\n        source,\n        target,\n        id,\n        length,\n        sequence,\n        linkNum: i,\n      })\n    }\n    Gp.nodes = Gp.nodes.concat(nodes)\n  }\n  for (let i = 0; i < G.links.length; i++) {\n    const { strand1, strand2, source, target, ...rest } = G.links[i]\n    const paths = seen[`${source}${strand1}_${target}${strand2}`] || []\n    const loop = source === target\n\n    // enumerates cases for which end of source connects to\n    // which end of the target\n    const link = {\n      source: `${source}-${strand1 === '+' ? 'end' : 'start'}`,\n      target: `${target}-${strand2 === '+' ? 'start' : 'end'}`,\n      ...rest,\n    }\n    if (loop) {\n      link.loop = true\n    }\n    if (paths.length) {\n      link.paths = paths\n    }\n    Gp.links.push(link)\n  }\n  return Gp\n}\n\n// source https://stackoverflow.com/questions/14446511/most-efficient-method-to-groupby-on-an-array-of-objects\n// returns an array that contains groupings of xs by attribute key\nfunction groupByArray(xs, key) {\n  return xs.reduce(function (rv, x) {\n    const v = key instanceof Function ? key(x) : x[key]\n    if (v !== undefined) {\n      const el = rv.find(r => r && r.key === v)\n      if (el) {\n        el.values.push(x)\n      } else {\n        rv.push({ key: v, values: [x] })\n      }\n    }\n    return rv\n  }, [])\n}\n\n// connects successive start->end to a path\n// param edges: {source:{x,y}, target:{x,y}}[]\nfunction makePath(edges) {\n  const path = []\n  let i = 0\n  for (; i < edges.length; i++) {\n    const st = edges[i]\n    path.push([st.source.x, st.source.y])\n  }\n  const last = edges[i - 1]\n  path.push([last.target.x, last.target.y])\n  return path\n}\n\n// groups the edges data structure by the linkNum attribute\nexport function generatePaths(edges, graph) {\n  const ret = groupByArray(edges, 'linkNum')\n  return ret.map(entry => ({\n    links: makePath(entry.values),\n    original: graph[entry.key],\n  }))\n}\n\nexport function generateEdges(links, graph) {\n  const result = []\n  for (let i = 0; i < links.length; i++) {\n    const link = links[i]\n    const original = graph[i]\n    if (!original.id) {\n      result.push({\n        links: [\n          [link.source.x, link.source.y],\n          [link.target.x, link.target.y],\n        ],\n        original,\n      })\n    }\n  }\n  return result\n}\n\n// implements this algorithm to project\n// a point \"forwards\" from a given contig node\n// translation of simple vector math here\n// https://math.stackexchange.com/questions/175896\nexport function projectLine(x1, y1, x2, y2, dt) {\n  const d = Math.sqrt((y2 - y1) ** 2 + (x2 - x1) ** 2)\n  const vx = (x2 - x1) / d\n  const vy = (y2 - y1) / d\n  return [x2 + dt * vx, y2 + dt * vy]\n}\n","import React, { useMemo, useRef, useEffect } from 'react'\nimport * as d3 from 'd3'\nimport { projectLine, reprocessGraph, generatePaths, generateEdges } from './util'\n\nconst Graph = React.forwardRef((props, ref) => {\n  const gref = useRef()\n  const {\n    graph,\n    drawPaths = false,\n    drawLabels = false,\n    drag = false,\n    settings: {\n      chunkSize = 1000,\n      forceSteps = 500,\n      linkSteps = 3,\n      sequenceThickness = 10,\n      linkThickness = 2,\n      theta = 0.9,\n      forceType = 'center',\n      strengthCenter = -50,\n      strengthXY = 0.3,\n    },\n    color = 'Rainbow',\n    width = 2000,\n    height = 1000,\n    redraw = 0,\n    onFeatureClick = () => {\n      console.log('no feature click configured')\n    },\n  } = props\n\n  const zoom = useRef(\n    d3\n      .zoom()\n      .extent([\n        [0, 0],\n        [width, height],\n      ])\n      .scaleExtent([0.1, 8]),\n  )\n\n  const data = useMemo(() => {\n    return reprocessGraph(graph, chunkSize)\n  }, [chunkSize, graph])\n\n  const colors = useMemo(() => {\n    return Object.fromEntries(\n      (graph.paths || []).map((p, i) => {\n        return [p.name, d3.schemeCategory10[i]]\n      }),\n    )\n  }, [graph.paths])\n  const links = useMemo(() => {\n    const links = data.links.map(d =>\n      Object.create({ ...d, x: Math.random(), y: Math.random() }),\n    )\n    const nodes = data.nodes.map(d =>\n      Object.create({ ...d, x: Math.random(), y: Math.random() }),\n    )\n    const simulation = d3\n      .forceSimulation(nodes)\n      .force(\n        'link',\n        d3\n          .forceLink(links)\n          .id(d => d.id)\n          .distance(link => {\n            return link.sequence ? 1 : 10\n          })\n          .iterations(linkSteps),\n      )\n      .force('charge', d3.forceManyBody().strength(strengthCenter).theta(theta))\n\n    if (forceType === 'center') {\n      simulation.force('center', d3.forceCenter(width / 3, height / 3))\n    } else if (forceType === 'xy') {\n      simulation\n        .force(\n          'x',\n          d3\n            .forceX()\n            .x(width / 3)\n            .strength(strengthXY),\n        )\n        .force(\n          'y',\n          d3\n            .forceY()\n            .y(height / 3)\n            .strength(strengthXY),\n        )\n    }\n\n    for (let i = 0; i < forceSteps; ++i) {\n      simulation.tick()\n    }\n    // used for redrawing\n    // eslint-disable-next-line no-unused-vars\n    const m = redraw\n    return links\n  }, [\n    data.links,\n    data.nodes,\n    linkSteps,\n    strengthCenter,\n    theta,\n    forceType,\n    redraw,\n    width,\n    height,\n    strengthXY,\n    forceSteps,\n  ])\n\n  useEffect(() => {\n    // zoom logic, similar to https://observablehq.com/@d3/zoom\n    // toggling logic from https://stackoverflow.com/a/29762389/2129219\n    const svg = d3.select(ref.current)\n    if (drag) {\n      svg.call(\n        zoom.current.on('zoom', () => {\n          d3.select(gref.current).attr('transform', d3.event.transform)\n        }),\n      )\n    } else {\n      svg.on('.zoom', null)\n    }\n  }, [drag, height, ref, width, zoom])\n\n  const paths = generatePaths(links, graph.nodes)\n  const edges = generateEdges(links, data.links)\n\n  const nodePathMap = {}\n  for (let i = 0; i < paths.length; i++) {\n    const p = paths[i]\n    const l = p.links.length\n    nodePathMap[`${p.original.id}-start`] = [p.links[1], p.links[0]]\n    nodePathMap[`${p.original.id}-end`] = [p.links[l - 2], p.links[l - 1]]\n  }\n\n  return (\n    <svg\n      width=\"100%\"\n      height=\"100%\"\n      ref={ref}\n      style={{ fontSize: 10 }}\n      viewBox={[0, 0, width, height].toString()}\n    >\n      <g ref={gref}>\n        {edges.map((p, j) => {\n          const x1 = p.links[0][0]\n          const y1 = p.links[0][1]\n          const x2 = p.links[1][0]\n          const y2 = p.links[1][1]\n\n          if (drawPaths) {\n            const [s1, t1] = nodePathMap[p.original.source]\n            const [s2, t2] = nodePathMap[p.original.target]\n            const m1 = (y2 - y1) / (x2 - x1)\n            const m2 = (s1[1] - t1[1]) / (s1[0] - t1[0])\n            const m3 = (s2[1] - t2[1]) / (s2[0] - t2[0])\n            if (Math.abs(m1 - m2) < 0.2 || Math.abs(m1 - m3) < 0.2) {\n              return p.original.paths\n                ? p.original.paths.map((pp, index) => {\n                    const dx = x2 - x1\n                    const dy = y2 - y1\n                    const dr = Math.sqrt(dx * dx + dy * dy) + Math.random() * 40\n                    const sweep = index % 2\n                    const cpath = `M${x1},${y1}A${dr},${dr} 0 0,${sweep} ${x2},${y2}`\n                    return (\n                      <path\n                        key={`${cpath}-${index}`}\n                        d={cpath}\n                        strokeWidth={linkThickness}\n                        stroke={colors[pp]}\n                        fill=\"none\"\n                        onClick={() => onFeatureClick(p.original)}\n                      >\n                        <title>{pp}</title>\n                      </path>\n                    )\n                  })\n                : null\n            }\n\n            return p.original.paths\n              ? p.original.paths.map((pp, index) => {\n                  const [cx1, cy1] = projectLine(\n                    s1[0],\n                    s1[1],\n                    t1[0],\n                    t1[1],\n                    60 + index * 30,\n                  )\n                  const [cx2, cy2] = projectLine(\n                    s2[0],\n                    s2[1],\n                    t2[0],\n                    t2[1],\n                    60 + index * 30,\n                  )\n\n                  const cpath = d3.path()\n                  cpath.moveTo(x1, y1)\n                  cpath.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2)\n\n                  return (\n                    <path\n                      key={`${cpath.toString()}-${index}`}\n                      d={cpath}\n                      strokeWidth={linkThickness}\n                      stroke={colors[pp]}\n                      fill=\"none\"\n                      onClick={() => onFeatureClick(p.original)}\n                    >\n                      <title>{pp}</title>\n                    </path>\n                  )\n                })\n              : null\n          } else {\n            const [s1, t1] = nodePathMap[p.original.source]\n            const [s2, t2] = nodePathMap[p.original.target]\n            const m1 = (y2 - y1) / (x2 - x1)\n            const m2 = (s1[1] - t1[1]) / (s1[0] - t1[0])\n            const m3 = (s2[1] - t2[1]) / (s2[0] - t2[0])\n            const line = d3.line().context(null)\n            const xRot = 90\n            const sweep = 0 // 1 or 0\n            const largeArc = 1\n            const drx = -30\n            const dry = -20\n            const path =\n              p.original.loop && !(m1 - m2 < 0.5 || m1 - m3 < 0.5)\n                ? `M${x1},${y1}A${drx},${dry} ${xRot},${largeArc},${sweep} ${x2},${y2}`\n                : line(p.links)\n\n            return (\n              <path\n                key={`${path.toString()}-${j}`}\n                d={path}\n                strokeWidth={linkThickness}\n                stroke=\"black\"\n                fill=\"none\"\n                onClick={() => onFeatureClick(p.original)}\n              />\n            )\n          }\n        })}\n\n        {paths.map((p, i) => {\n          const stroke = color.startsWith('Just')\n            ? color.replace('Just', '').toLowerCase()\n            : d3.hsl(d3[`interpolate${color}`](i / paths.length)).darker()\n          return (\n            <Path\n              key={p.original.id}\n              sequenceThickness={sequenceThickness}\n              drawLabels={drawLabels}\n              path={p}\n              stroke={stroke}\n              onFeatureClick={onFeatureClick}\n            />\n          )\n        })}\n      </g>\n    </svg>\n  )\n})\n\nfunction Path({ path, drawLabels, sequenceThickness, stroke, onFeatureClick }) {\n  const line = d3.line().context(null)\n  const t1 = path.links[0]\n  const s1 = path.links[1]\n  const t2 = path.links[path.links.length - 1]\n  const s2 = path.links[path.links.length - 2]\n  const [cx1, cy1] = projectLine(s1[0], s1[1], t1[0], t1[1], 100)\n  const [cx2, cy2] = projectLine(s2[0], s2[1], t2[0], t2[1], 100)\n  const invisibleTextPath = line([[cx1, cy1], ...path.links, [cx2, cy2]])\n\n  return (\n    <>\n      <path\n        id={path.original.id}\n        d={line(path.links)}\n        strokeWidth={sequenceThickness}\n        stroke={stroke}\n        fill=\"none\"\n        onClick={() => onFeatureClick(path.original)}\n      >\n        <title>{path.original.id}</title>\n      </path>\n      {drawLabels ? (\n        <>\n          <path id={`${path.original.id}_invisible`} d={invisibleTextPath} fill=\"none\" />\n          <text dy={12}>\n            <textPath\n              startOffset=\"50%\"\n              textAnchor=\"middle\"\n              href={`#${path.original.id}_invisible`}\n            >\n              {path.original.id}\n            </textPath>\n          </text>\n        </>\n      ) : null}\n    </>\n  )\n}\n\nexport { Graph }\n","import React from 'react'\nimport { Form, Button } from 'react-bootstrap'\n\nexport function Sidebar({\n  onDrawLabels,\n  drawLabels,\n  drawPaths,\n  drag,\n  onDrag,\n  onColorChange,\n  onPathDraw,\n  onRedraw,\n  colorScheme,\n}) {\n  return (\n    <div>\n      <p>Settings</p>\n      <Form.Label>Color</Form.Label>\n      <Form.Control\n        value={colorScheme}\n        onChange={event => onColorChange(event.target.value)}\n        as=\"select\"\n      >\n        <option>JustGrey</option>\n        <option>Turbo</option>\n        <option>Rainbow</option>\n        <option>Spectral</option>\n        <option>Viridis</option>\n        <option>RdYlBu</option>\n      </Form.Control>\n      <br />\n      <Form.Group>\n        <Form.Check\n          onChange={event => {\n            onPathDraw(event.target.checked)\n          }}\n          type=\"checkbox\"\n          label=\"Draw paths\"\n          checked={drawPaths}\n        />\n      </Form.Group>\n      <Form.Group>\n        <Form.Check\n          onChange={event => {\n            onDrawLabels(event.target.checked)\n          }}\n          type=\"checkbox\"\n          label=\"Draw labels\"\n          checked={drawLabels}\n        />\n      </Form.Group>\n      <Form.Group>\n        <Form.Check\n          onChange={event => {\n            onDrag(event.target.checked)\n          }}\n          type=\"checkbox\"\n          label=\"Enable panning/zooming?\"\n          checked={drag}\n        />\n      </Form.Group>\n      <br />\n      <Button onClick={() => onRedraw()}>Redraw</Button>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { Button, Col, Form, Modal, Row } from 'react-bootstrap'\n\nexport function SettingsDialog({ onHide, settings: paramSettings, onSettings }) {\n  const [settings, setSettings] = useState(paramSettings)\n  const {\n    chunkSize,\n    forceSteps,\n    linkSteps,\n    strengthCenter,\n    strengthXY,\n    forceType,\n    theta,\n    sequenceThickness,\n    linkThickness,\n  } = settings\n  return (\n    <Modal show={true} onHide={onHide} size=\"lg\">\n      <Modal.Header closeButton>\n        <Modal.Title>Settings</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <Form\n          onSubmit={event => {\n            event.preventDefault()\n            onSettings({\n              ...settings,\n              chunkSize: +chunkSize,\n              forceType: forceType,\n              forceSteps: +forceSteps,\n              linkSteps: +linkSteps,\n              strengthCenter: +strengthCenter,\n              theta: +theta,\n              sequenceThickness: +sequenceThickness,\n              linkThickness: +linkThickness,\n            })\n            onHide()\n          }}\n        >\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Number of simulation steps for the nodes\n              <Form.Text muted>Used in the force-based layout simulation</Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={forceSteps}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    forceSteps: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Number of simulation steps for the links\n              <Form.Text muted>\n                Increases the rigidity of the link based constraints\n              </Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={linkSteps}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    linkSteps: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Sequence chunk size\n              <Form.Text muted>\n                If a contig is of length 5000, then chunk length 1000 would become 5\n                segments. Note that contigs smaller than the chunk length may not be\n                proportionally sized\n              </Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={chunkSize}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    chunkSize: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Theta\n              <Form.Text muted>Parameter for the force directed layout</Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={theta}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    theta: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Strength (force xy)\n              <Form.Text muted>\n                This parameter should be between [0,1], applies to the XY layout\n              </Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={strengthXY}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    strengthXY: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Strength (particle charge)\n              <Form.Text muted>\n                This value is like a charged particle force, by being negative it keeps\n                things farther apart\n              </Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                type=\"number\"\n                value={strengthCenter}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    strengthCenter: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Force type\n              <Form.Text muted>\n                Force XY results in a circular style layout that can be helpful for more\n                disjoint graphs, force center is default\n              </Form.Text>\n            </Form.Label>\n            <Col>\n              <Form.Control\n                value={forceType}\n                onChange={event =>\n                  setSettings(settings => ({\n                    ...settings,\n                    forceType: event.target.value,\n                  }))\n                }\n                as=\"select\"\n              >\n                <option>center</option>\n                <option>xy</option>\n              </Form.Control>\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Sequence thickness\n            </Form.Label>\n            <Col>\n              <input\n                type=\"range\"\n                min={1}\n                max={100}\n                style={{ width: '100%' }}\n                value={sequenceThickness}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    sequenceThickness: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row}>\n            <Form.Label column sm=\"4\">\n              Link thickness\n            </Form.Label>\n            <Col>\n              <input\n                type=\"range\"\n                min={1}\n                max={100}\n                style={{ width: '100%' }}\n                value={linkThickness}\n                onChange={event => {\n                  const val = event.target.value\n                  setSettings(settings => ({\n                    ...settings,\n                    linkThickness: val,\n                  }))\n                }}\n              />\n            </Col>\n          </Form.Group>\n\n          <Button type=\"submit\">Submit</Button>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","import React, { useRef, useState } from 'react'\nimport { Button, Form, Modal, Navbar, Nav, NavDropdown } from 'react-bootstrap'\nimport { SettingsDialog } from './SettingsDialog'\n\nfunction AboutDialog({ onHide }) {\n  return (\n    <Modal show={true} onHide={onHide}>\n      <Modal.Header closeButton>\n        <Modal.Title>graphgenome browser</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <p>\n          This is a small demo of browsing simple graph genomes. The app can read GFA\n          format URLs and local files, all processing is done client side currently.\n        </p>\n        <p>\n          Contact <a href=\"mainto:colin.diesh@gmail.com\">Colin Diesh</a>\n        </p>\n        <p>\n          Thanks to the BCC2020 pangenome team, and{' '}\n          <a href=\"https://github.com/rrwick/Bandage\">Bandage</a> for inspiration.\n        </p>\n        <p>\n          Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and\n          gfalint (Shaun Jackman)\n        </p>\n        <p>\n          This app attempts to support GFA2 but probably does not properly render the\n          intricacies of the edge spec\n        </p>\n        <a href=\"https://github.com/cmdcolin/graphgenomeviewer\">GitHub</a>\n      </Modal.Body>\n    </Modal>\n  )\n}\n\nfunction OpenURLDialog({ onHide, onData }) {\n  const [value, setValue] = useState()\n  return (\n    <Modal show={true} onHide={onHide}>\n      <Modal.Header closeButton>\n        <Modal.Title>graphgenome browser</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <Form\n          onSubmit={() => {\n            onData(value)\n            onHide()\n          }}\n        >\n          <Form.Group>\n            <Form.Label>Enter URL</Form.Label>\n            <Form.Control\n              type=\"input\"\n              value={value}\n              onChange={event => setValue(event.target.value)}\n            />\n          </Form.Group>\n          <Button type=\"submit\">Submit</Button>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n\nfunction OpenFileDialog({ onHide, onGraph }) {\n  const ref = useRef()\n  return (\n    <Modal show={true} onHide={onHide}>\n      <Modal.Header closeButton>\n        <Modal.Title>Open file</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <Form\n          onSubmit={async event => {\n            event.preventDefault()\n            const data = await ref.current.files[0].text()\n            onGraph(data)\n            onHide()\n          }}\n        >\n          <Form.Group>\n            <Form.Label>Open file</Form.Label>\n            <Form.Control ref={ref} type=\"file\" />\n          </Form.Group>\n          <Button type=\"submit\">Submit</Button>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n\nexport function Header({ onData, settings, onGraph, onExportSVG, onSettings }) {\n  const [showAbout, setShowAbout] = useState()\n  const [showSettings, setShowSettings] = useState()\n  const [showOpenURL, setShowOpenURL] = useState()\n  const [showOpenFile, setShowOpenFile] = useState()\n  return (\n    <>\n      <Navbar bg=\"light\" expand=\"lg\">\n        <Navbar.Brand href=\"#home\">graphgenome browser</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            <NavDropdown title=\"File\" id=\"basic-nav-dropdown\">\n              <NavDropdown.Item onClick={() => setShowOpenURL(true)}>\n                Open URL\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => setShowOpenFile(true)}>\n                Open file\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onExportSVG()}>\n                Export SVG\n              </NavDropdown.Item>\n            </NavDropdown>\n            <NavDropdown title=\"Examples\" id=\"basic-nav-dropdown\">\n              <NavDropdown.Item onClick={() => onData('MT.gfa')}>\n                MT GFA-spec example\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('toy_pangenome.gfa')}>\n                Paths example\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('example1.gfa')}>\n                Paths example 2\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('big1.gfa')}>Big1</NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('ir1.gfa')}>Ir1</NavDropdown.Item>\n              <NavDropdown.Item\n                onClick={() => onData('test_contig_placement_assembly_graph.gfa')}\n              >\n                Unicycler example\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('circle.gfa')}>\n                Simple circle\n              </NavDropdown.Item>\n              <NavDropdown.Item onClick={() => onData('example1.gfa2')}>\n                GFA2.0 example\n              </NavDropdown.Item>\n            </NavDropdown>\n            <Nav.Link\n              onClick={() => {\n                setShowSettings(true)\n              }}\n            >\n              Settings\n            </Nav.Link>\n            <Nav.Link\n              onClick={() => {\n                setShowAbout(true)\n              }}\n            >\n              About\n            </Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      {showAbout ? <AboutDialog onHide={() => setShowAbout(false)} /> : null}\n      {showSettings ? (\n        <SettingsDialog\n          settings={settings}\n          onHide={() => setShowSettings(false)}\n          onSettings={onSettings}\n        />\n      ) : null}\n      {showOpenURL ? (\n        <OpenURLDialog onData={onData} onHide={() => setShowOpenURL(false)} />\n      ) : null}\n      {showOpenFile ? (\n        <OpenFileDialog onGraph={onGraph} onHide={() => setShowOpenFile(false)} />\n      ) : null}\n    </>\n  )\n}\n","import React, { useEffect, useMemo, useRef, useState } from 'react'\nimport { FeatureDialog } from './FeatureDialog'\nimport { Graph } from './Graph'\nimport { Sidebar } from './Sidebar'\nimport { Header } from './Header'\nimport { parseGFA } from './util'\nimport { serialize } from './util'\nimport saveAs from 'file-saver'\nimport {\n  useQueryParams,\n  BooleanParam,\n  StringParam,\n  NumberParam,\n  withDefault,\n} from 'use-query-params'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.css'\n\nfunction App() {\n  const [featureData, setFeatureData] = useState()\n  const [data, setData] = useState()\n  const [error, setError] = useState()\n  const [, updateState] = useState()\n  const forceUpdate = React.useCallback(() => updateState({}), [])\n  const [redraw, setRedraw] = useState(0)\n  const [query, setQuery] = useQueryParams({\n    strengthCenter: withDefault(NumberParam, -50),\n    strengthXY: withDefault(NumberParam, 0.1),\n    chunkSize: withDefault(NumberParam, 1000),\n    forceSteps: withDefault(NumberParam, 200),\n    linkSteps: withDefault(NumberParam, 1),\n    sequenceThickness: withDefault(NumberParam, 10),\n    linkThickness: withDefault(NumberParam, 2),\n    theta: withDefault(NumberParam, 0.9),\n    forceType: withDefault(StringParam, 'center'),\n    dataset: withDefault(StringParam, 'MT.gfa'),\n    colorScheme: withDefault(StringParam, 'Rainbow'),\n    drawLabels: withDefault(BooleanParam, false),\n    drawPaths: withDefault(BooleanParam, false),\n    drag: withDefault(BooleanParam, true),\n  })\n\n  const { dataset, drawLabels, drawPaths, colorScheme, drag, ...settings } = query\n\n  const ref = useRef()\n  useEffect(() => {\n    ;(async () => {\n      try {\n        const result = await fetch(dataset)\n        if (!result.ok) {\n          throw new Error(`Failed to fetch ${result.statusText}`)\n        }\n        const text = await result.text()\n        setData(text)\n        setError(undefined)\n      } catch (e) {\n        console.error(e)\n        setError(e.message)\n      }\n    })()\n  }, [dataset])\n\n  const graph = useMemo(() => {\n    return data ? parseGFA(data) : undefined\n  }, [data])\n\n  return (\n    <div>\n      <Header\n        onData={value => {\n          setQuery({ dataset: value })\n          forceUpdate()\n        }}\n        onGraph={graph => {\n          setData(graph)\n        }}\n        onSettings={settings => {\n          setQuery(settings)\n          forceUpdate()\n        }}\n        onExportSVG={() => {\n          saveAs(serialize(ref.current))\n        }}\n        settings={settings}\n      />\n      {featureData ? (\n        <FeatureDialog\n          data={featureData}\n          onModal={data => {\n            setFeatureData(data)\n          }}\n          onHide={() => {\n            setFeatureData(undefined)\n          }}\n        />\n      ) : null}\n      <div className=\"flexcontainer\">\n        <div id=\"sidebar\" className=\"sidebar\">\n          <Sidebar\n            colorScheme={colorScheme}\n            drawPaths={drawPaths}\n            drawLabels={drawLabels}\n            drag={drag}\n            onColorChange={value => {\n              setQuery({ colorScheme: value })\n              forceUpdate()\n            }}\n            onDrawLabels={value => {\n              setQuery({ drawLabels: value })\n              forceUpdate()\n            }}\n            onDrag={value => {\n              setQuery({ drag: value })\n              forceUpdate()\n            }}\n            onPathDraw={value => {\n              setQuery({ drawPaths: value })\n              forceUpdate()\n            }}\n            onRedraw={() => setRedraw(redraw => redraw + 1)}\n          />\n        </div>\n        <div className=\"body\">\n          {error ? <div style={{ color: 'red' }}>{error}</div> : null}\n          {graph ? (\n            <Graph\n              graph={graph}\n              ref={ref}\n              redraw={redraw}\n              drag={drag}\n              color={colorScheme}\n              drawLabels={drawLabels}\n              drawPaths={drawPaths}\n              onFeatureClick={data => {\n                setFeatureData(data)\n              }}\n              settings={settings}\n            />\n          ) : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { QueryParamProvider } from 'use-query-params'\n\nReactDOM.render(\n  <React.StrictMode>\n    <QueryParamProvider>\n      <App />\n    </QueryParamProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}