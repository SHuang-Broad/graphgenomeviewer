(this.webpackJsonpgenomegraph=this.webpackJsonpgenomegraph||[]).push([[0],{68:function(e,t,a){e.exports=a(94)},73:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(73),a(33)),i=a.n(o),s=a(42),u=a(37),m=a(7),h=a(100),f=a(60);function d(e){var t=e.data,a=e.onHide;return r.a.createElement(h.a,{show:!0,onHide:a},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Feature details")),r.a.createElement(h.a.Body,null,r.a.createElement("div",null,"Attributes"),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))})),r.a.createElement("hr",null),t.tags&&Object.keys(t.tags).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Tags"),Object.entries(t.tags).map((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))}))):null,r.a.createElement(h.a.Footer,null,r.a.createElement(f.a,{variant:"secondary",onClick:a},"Close"))))}var g=a(65),p=a(9),b=a(11),E=a(35),v=a(56);function k(e,t){var a=e.split(":"),n=Object(m.a)(a,3),r=n[0],c=n[1],l=n[2];"i"===c?t[r]=+l:"Z"===c&&(t[r]=l)}function O(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push([n.source.x,n.source.y])}var r=e[a-1];return t.push([r.target.x,r.target.y]),t}function j(e,t){var a;return(a="linkNum",e.reduce((function(e,t){var n=a instanceof Function?a(t):t[a];if(void 0!==n){var r=e.find((function(e){return e&&e.key===n}));r?r.values.push(t):e.push({key:n,values:[t]})}return e}),[])).map((function(e){return{links:O(e.values),original:t[e.key]}}))}function w(e,t,a,n,r){var c=r/Math.sqrt(Math.pow(n-t,2)+Math.pow(a-e,2));return[(1-c)*e+c*a,(1-c)*t+c*n]}var y=r.a.forwardRef((function(e,t){var a=Object(n.useRef)(),c=e.graph,l=e.drawPaths,o=void 0!==l&&l,i=e.drawLabels,s=void 0!==i&&i,h=e.settings,f=h.chunkSize,d=void 0===f?1e3:f,E=h.forceSteps,v=void 0===E?500:E,k=h.linkSteps,O=void 0===k?3:k,y=h.sequenceThickness,S=void 0===y?10:y,C=h.linkThickness,x=void 0===C?2:C,T=h.theta,L=void 0===T?.9:T,G=h.forceType,M=void 0===G?"center":G,H=h.strengthCenter,B=void 0===H?-50:H,F=h.strengthXY,N=void 0===F?.3:F,W=e.color,A=void 0===W?"Rainbow":W,I=e.width,P=void 0===I?2e3:I,q=e.height,z=void 0===q?1e3:q,R=e.redraw,D=void 0===R?0:R,_=e.onFeatureClick,X=void 0===_?function(){console.log("no feature click configured")}:_,Y=Object(n.useMemo)((function(){return function(e,t){for(var a={nodes:[],links:[]},n={},r=0;r<(e.paths||{}).length;r++)for(var c=e.paths[r],l=c.path.split(","),o=0;o<l.length-1;o++){var i="".concat(l[o],"_").concat(l[o+1]);n[i]?n[i].push(c.name):n[i]=[c.name]}for(var s=0;s<e.nodes.length;s++){var m=e.nodes[s],h=m.id,f=m.sequence,d=m.length,g=Object(u.a)(m,["id","sequence","length"]),b=[];b.push(Object(p.a)({},g,{id:"".concat(h,"-start")}));for(var E=t;E<d-t;E+=t)b.push(Object(p.a)({},g,{id:"".concat(h,"-").concat(E)}));b.push(Object(p.a)({},g,{id:"".concat(h,"-end")}));for(var v=0;v<b.length-1;v++){var k=b[v].id,O=b[v+1].id;a.links.push(Object(p.a)({},g,{source:k,target:O,id:h,length:d,sequence:f,linkNum:s}))}a.nodes=a.nodes.concat(b)}for(var j=0;j<e.links.length;j++){var w=e.links[j],y=w.strand1,S=w.strand2,C=w.source,x=w.target,T=Object(u.a)(w,["strand1","strand2","source","target"]),L=n["".concat(C).concat(y,"_").concat(x).concat(S)]||[],G=C===x,M=Object(p.a)({source:"".concat(C,"-").concat("+"===y?"end":"start"),target:"".concat(x,"-").concat("+"===S?"start":"end")},T);G&&(M.loop=!0),L.length&&(M.paths=L),a.links.push(M)}return a}(c,d)}),[d,c]),J=Object(n.useMemo)((function(){return Object.fromEntries((c.paths||[]).map((function(e,t){return[e.name,b.schemeCategory10[t]]})))}),[c.paths]),U=Object(n.useMemo)((function(){var e=Y.links.map((function(e){return Object.create(Object(p.a)({},e,{x:Math.random(),y:Math.random()}))})),t=Y.nodes.map((function(e){return Object.create(Object(p.a)({},e,{x:Math.random(),y:Math.random()}))})),a=b.forceSimulation(t).force("link",b.forceLink(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10})).iterations(O)).force("charge",b.forceManyBody().strength(B).theta(L));"center"===M?a.force("center",b.forceCenter(P/3,z/3)):"xy"===M&&a.force("x",b.forceX().x(P/3).strength(N)).force("y",b.forceY().y(z/3).strength(N));for(var n=0;n<v;++n)a.tick();return e}),[Y.links,Y.nodes,O,B,L,M,D,P,z,N,v]);Object(n.useEffect)((function(){b.select(t.current).call(b.zoom().extent([[0,0],[P,z]]).scaleExtent([.1,8]).on("zoom",(function(){b.select(a.current).attr("transform",b.event.transform)})))}),[z,t,P]);for(var V=j(U,c.nodes),Z=function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n],c=t[n];c.id||a.push({links:[[r.source.x,r.source.y],[r.target.x,r.target.y]],original:c})}return a}(U,Y.links),$={},K=0;K<V.length;K++){var Q=V[K],ee=Q.links.length;$["".concat(Q.original.id,"-start")]=[Q.links[1],Q.links[0]],$["".concat(Q.original.id,"-end")]=[Q.links[ee-2],Q.links[ee-1]]}return r.a.createElement("svg",{width:"100%",height:"100%",ref:t,style:{fontSize:10},viewBox:[0,0,P,z].toString()},r.a.createElement("g",{ref:a},Z.map((function(e,t){var a=e.links[0][0],n=e.links[0][1],c=e.links[1][0],l=e.links[1][1];if(o){var i=Object(m.a)($[e.original.source],2),s=i[0],u=i[1],h=Object(m.a)($[e.original.target],2),f=h[0],d=h[1],g=(l-n)/(c-a),p=(s[1]-u[1])/(s[0]-u[0]),E=(f[1]-d[1])/(f[0]-d[0]);return Math.abs(g-p)<.2||Math.abs(g-E)<.2?e.original.paths?e.original.paths.map((function(t,o){var i=c-a,s=l-n,u=Math.sqrt(i*i+s*s)+40*Math.random(),m=o%2,h="M".concat(a,",").concat(n,"A").concat(u,",").concat(u," 0 0,").concat(m," ").concat(c,",").concat(l);return r.a.createElement("path",{key:"".concat(h,"-").concat(o),d:h,strokeWidth:x,stroke:J[t],fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,t))})):null:e.original.paths?e.original.paths.map((function(t,o){var i=w(s[0],s[1],u[0],u[1],70+30*o),h=Object(m.a)(i,2),g=h[0],p=h[1],E=w(f[0],f[1],d[0],d[1],70+30*o),v=Object(m.a)(E,2),k=v[0],O=v[1],j=b.path();return j.moveTo(a,n),j.bezierCurveTo(g,p,k,O,c,l),r.a.createElement("path",{key:"".concat(j.toString(),"-").concat(o),d:j,strokeWidth:x,stroke:J[t],fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,t))})):null}var v=Object(m.a)($[e.original.source],2),k=v[0],O=v[1],j=Object(m.a)($[e.original.target],2),y=j[0],S=j[1],C=(l-n)/(c-a),T=(k[1]-O[1])/(k[0]-O[0]),L=(y[1]-S[1])/(y[0]-S[0]),G=b.line().context(null),M=e.original.loop&&!(C-T<.5||C-L<.5)?"M".concat(a,",").concat(n,"A").concat(-30,",").concat(-20," ").concat(90,",").concat(1,",").concat(0," ").concat(c,",").concat(l):G(e.links);return r.a.createElement("path",{key:"".concat(M.toString(),"-").concat(t),d:M,strokeWidth:x,stroke:"black",fill:"none",onClick:function(){return X(e.original)}})})),V.map((function(e,t){var a=b.line().context(null),n=a(e.links),c=e.links[0],l=e.links[1],o=e.links[e.links.length-1],i=e.links[e.links.length-2],u=w(l[0],l[1],c[0],c[1],100),h=Object(m.a)(u,2),f=h[0],d=h[1],p=w(i[0],i[1],o[0],o[1],100),E=Object(m.a)(p,2),v=E[0],k=E[1],O=a([[f,d]].concat(Object(g.a)(e.links),[[v,k]])),j=A.startsWith("Just")?A.replace("Just","").toLowerCase():b.hsl(b["interpolate".concat(A)](t/V.length)).darker();return r.a.createElement(r.a.Fragment,{key:"".concat(n,"_").concat(t)},r.a.createElement("path",{id:e.original.id,d:n,strokeWidth:S,stroke:j,fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,e.original.id)),s?r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:"".concat(e.original.id,"_invisible"),d:O,fill:"none"}),r.a.createElement("text",{dy:12},r.a.createElement("textPath",{startOffset:"50%",textAnchor:"middle",href:"#".concat(e.original.id,"_invisible")},e.original.id))):null)}))))})),S=a(101);function C(e){var t=e.onDrawLabels,a=e.drawLabels,n=e.drawPaths,c=e.onColorChange,l=e.onPathDraw,o=e.onRedraw,i=e.colorScheme;return r.a.createElement("div",null,r.a.createElement("p",null,"Settings"),r.a.createElement(S.a.Label,null,"Color"),r.a.createElement(S.a.Control,{value:i,onChange:function(e){return c(e.target.value)},as:"select"},r.a.createElement("option",null,"JustGrey"),r.a.createElement("option",null,"Turbo"),r.a.createElement("option",null,"Rainbow"),r.a.createElement("option",null,"Spectral"),r.a.createElement("option",null,"Viridis"),r.a.createElement("option",null,"RdYlBu")),r.a.createElement("br",null),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{onChange:function(e){l(e.target.checked)},type:"checkbox",label:"Draw paths",checked:n})),r.a.createElement("br",null),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{onChange:function(e){t(e.target.checked)},type:"checkbox",label:"Draw labels",checked:a})),r.a.createElement("br",null),r.a.createElement(f.a,{onClick:function(){return o()}},"Redraw"))}var x=a(103),T=a(104),L=a(102),G=a(99),M=a(61);function H(e){var t=e.onHide,a=e.settings,c=e.onSettings,l=Object(n.useState)(a),o=Object(m.a)(l,2),i=o[0],s=o[1],u=i.chunkSize,d=i.forceSteps,g=i.linkSteps,b=i.strengthCenter,E=i.strengthXY,v=i.forceType,k=i.theta,O=i.sequenceThickness,j=i.linkThickness;return r.a.createElement(h.a,{show:!0,onHide:t,size:"lg"},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Settings")),r.a.createElement(h.a.Body,null,r.a.createElement(S.a,{onSubmit:function(e){e.preventDefault(),c(Object(p.a)({},i,{chunkSize:+u,forceType:v,forceSteps:+d,linkSteps:+g,strengthCenter:+b,theta:+k,sequenceThickness:+O,linkThickness:+j})),t()}},r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the nodes",r.a.createElement(S.a.Text,{muted:!0},"Used in the force-based layout simulation")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:d,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{forceSteps:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the links",r.a.createElement(S.a.Text,{muted:!0},"Increases the rigidity of the link based constraints")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:g,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{linkSteps:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Sequence chunk size",r.a.createElement(S.a.Text,{muted:!0},"If a contig is of length 5000, then chunk length 1000 would become 5 segments. Note that contigs smaller than the chunk length may not be proportionally sized")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:u,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{chunkSize:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Theta",r.a.createElement(S.a.Text,{muted:!0},"Parameter for the force directed layout")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:k,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{theta:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Strength (force xy)",r.a.createElement(S.a.Text,{muted:!0},"This parameter should be between [0,1], applies to the XY layout")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:E,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{strengthXY:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Strength (particle charge)",r.a.createElement(S.a.Text,{muted:!0},"This value is like a charged particle force, by being negative it keeps things farther apart")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{type:"number",value:b,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{strengthCenter:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Force type",r.a.createElement(S.a.Text,{muted:!0},"Force XY results in a circular style layout that can be helpful for more disjoint graphs, force center is default")),r.a.createElement(M.a,null,r.a.createElement(S.a.Control,{value:v,onChange:function(e){return s((function(t){return Object(p.a)({},t,{forceType:e.target.value})}))},as:"select"},r.a.createElement("option",null,"center"),r.a.createElement("option",null,"xy")))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Sequence thickness"),r.a.createElement(M.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:O,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{sequenceThickness:t})}))}}))),r.a.createElement(S.a.Group,{as:G.a},r.a.createElement(S.a.Label,{column:!0,sm:"4"},"Link thickness"),r.a.createElement(M.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:j,onChange:function(e){var t=e.target.value;s((function(e){return Object(p.a)({},e,{linkThickness:t})}))}}))),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function B(e){var t=e.onHide;return r.a.createElement(h.a,{show:!0,onHide:t},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"graphgenome browser")),r.a.createElement(h.a.Body,null,r.a.createElement("p",null,"This is a small demo of browsing simple graph genomes. The app can read GFA format URLs and local files, all processing is done client side currently."),r.a.createElement("p",null,"Contact ",r.a.createElement("a",{href:"mainto:colin.diesh@gmail.com"},"Colin Diesh")),r.a.createElement("p",null,"Thanks to the BCC2020 pangenome team, and"," ",r.a.createElement("a",{href:"https://github.com/rrwick/Bandage"},"Bandage")," for inspiration."),r.a.createElement("p",null,"Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and gfalint (Shaun Jackman)"),r.a.createElement("p",null,"This app attempts to support GFA2 but probably does not properly render the intricacies of the edge spec"),r.a.createElement("a",{href:"https://github.com/cmdcolin/graphgenomeviewer"},"GitHub")))}function F(e){var t=e.onHide,a=e.onData,c=Object(n.useState)(),l=Object(m.a)(c,2),o=l[0],i=l[1];return r.a.createElement(h.a,{show:!0,onHide:t},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"graphgenome browser")),r.a.createElement(h.a.Body,null,r.a.createElement(S.a,{onSubmit:function(){a(o),t()}},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Enter URL"),r.a.createElement(S.a.Control,{type:"input",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function N(e){var t=e.onHide,a=e.onGraph,c=Object(n.useRef)();return r.a.createElement(h.a,{show:!0,onHide:t},r.a.createElement(h.a.Header,{closeButton:!0},r.a.createElement(h.a.Title,null,"Open file")),r.a.createElement(h.a.Body,null,r.a.createElement(S.a,{onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c.current.files[0].text();case 3:r=e.sent,a(r),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Open file"),r.a.createElement(S.a.Control,{ref:c,type:"file"})),r.a.createElement(f.a,{type:"submit"},"Submit"))))}function W(e){var t=e.onData,a=e.settings,c=e.onGraph,l=e.onExportSVG,o=e.onSettings,i=Object(n.useState)(),s=Object(m.a)(i,2),u=s[0],h=s[1],f=Object(n.useState)(),d=Object(m.a)(f,2),g=d[0],p=d[1],b=Object(n.useState)(),E=Object(m.a)(b,2),v=E[0],k=E[1],O=Object(n.useState)(),j=Object(m.a)(O,2),w=j[0],y=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{bg:"light",expand:"lg"},r.a.createElement(x.a.Brand,{href:"#home"},"graphgenome browser"),r.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(x.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(T.a,{className:"mr-auto"},r.a.createElement(L.a,{title:"File",id:"basic-nav-dropdown"},r.a.createElement(L.a.Item,{onClick:function(){return k(!0)}},"Open URL"),r.a.createElement(L.a.Item,{onClick:function(){return y(!0)}},"Open file"),r.a.createElement(L.a.Item,{onClick:function(){return l()}},"Export SVG")),r.a.createElement(L.a,{title:"Examples",id:"basic-nav-dropdown"},r.a.createElement(L.a.Item,{onClick:function(){return t("MT.gfa")}},"MT GFA-spec example"),r.a.createElement(L.a.Item,{onClick:function(){return t("toy_pangenome.gfa")}},"Paths example"),r.a.createElement(L.a.Item,{onClick:function(){return t("example1.gfa")}},"Paths example 2"),r.a.createElement(L.a.Item,{onClick:function(){return t("big1.gfa")}},"Big1"),r.a.createElement(L.a.Item,{onClick:function(){return t("ir1.gfa")}},"Ir1"),r.a.createElement(L.a.Item,{onClick:function(){return t("test_contig_placement_assembly_graph.gfa")}},"Unicycler example"),r.a.createElement(L.a.Item,{onClick:function(){return t("circle.gfa")}},"Simple circle"),r.a.createElement(L.a.Item,{onClick:function(){return t("example1.gfa2")}},"GFA2.0 example")),r.a.createElement(T.a.Link,{onClick:function(){p(!0)}},"Settings"),r.a.createElement(T.a.Link,{onClick:function(){h(!0)}},"About")))),u?r.a.createElement(B,{onHide:function(){return h(!1)}}):null,g?r.a.createElement(H,{settings:a,onHide:function(){return p(!1)},onSettings:o}):null,v?r.a.createElement(F,{onData:t,onHide:function(){return k(!1)}}):null,w?r.a.createElement(N,{onGraph:c,onHide:function(){return y(!1)}}):null)}var A=a(63),I=a.n(A),P=a(6);a(92),a(93);var q=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),o=Object(m.a)(l,2),h=o[0],f=o[1],g=Object(n.useState)(),p=Object(m.a)(g,2),b=p[0],O=p[1],j=Object(n.useState)(),w=Object(m.a)(j,2)[1],S=r.a.useCallback((function(){return w({})}),[]),x=Object(n.useState)(0),T=Object(m.a)(x,2),L=T[0],G=T[1],M=Object(P.e)({strengthCenter:Object(P.f)(P.b,-50),strengthXY:Object(P.f)(P.b,.1),chunkSize:Object(P.f)(P.b,1e3),forceSteps:Object(P.f)(P.b,200),linkSteps:Object(P.f)(P.b,1),sequenceThickness:Object(P.f)(P.b,10),linkThickness:Object(P.f)(P.b,2),theta:Object(P.f)(P.b,.9),forceType:Object(P.f)(P.d,"center"),dataset:Object(P.f)(P.d,"MT.gfa"),colorScheme:Object(P.f)(P.d,"Rainbow"),drawLabels:Object(P.f)(P.a,!1),drawPaths:Object(P.f)(P.a,!1)}),H=Object(m.a)(M,2),B=H[0],F=H[1],N=B.dataset,A=B.drawLabels,q=B.drawPaths,z=B.colorScheme,R=Object(u.a)(B,["dataset","drawLabels","drawPaths","colorScheme"]),D=Object(n.useRef)();Object(n.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(N);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch ".concat(t.statusText));case 6:return e.next=8,t.text();case 8:a=e.sent,f(a),O(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),O(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[N]);var _=Object(n.useMemo)((function(){return h?function(e){var t,a={nodes:[],links:[],paths:[],header:[]},n=Object(v.a)(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.startsWith("H")&&function(){var e={},t=r.split("\t");Object(E.a)(t).slice(1).forEach((function(t){return k(t,e)})),a.header.push(e)}(),r.startsWith("S")){var c=r.split("\t"),l=Object(E.a)(c),o=l[1],i=l.slice(2),s=0,u="",m=void 0,h=!1;+i[0]?(s=+i[0],u=i[1],m=i.slice(2)):(h=!0,s=(u=i[0]).length,m=i.slice(1));for(var f={},d=0;d<m.length;d++)k(i[d],f);h&&f.LN&&(s=f.LN),a.nodes.push({id:o,length:s,sequence:u,tags:f})}else if(r.startsWith("E")){for(var g=r.split("\t"),p=Object(E.a)(g),b=(p[1],p[2]),O=p[3],j=(p[4],p[5],p[6],p[7],p[8]),w=p.slice(9),y=b.slice(0,-1),S=O.slice(0,-1),C=b.charAt(b.length-1),x=b.charAt(O.length-1),T={},L=0;L<w.length;L++)k(w[L],T);a.links.push({source:y,target:S,strand1:C,strand2:x,cigar:j,tags:T})}else if(r.startsWith("L")){for(var G=r.split("\t"),M=Object(E.a)(G),H=M[1],B=M[2],F=M[3],N=M[4],W=M[5],A=M.slice(6),I={},P=0;P<A.length;P++)k(A[P],I);a.links.push({source:H,target:F,strand1:B,strand2:N,cigar:W,tags:I})}else if(r.startsWith("P")){var q=r.split("\t"),z=Object(E.a)(q),R=z[1],D=z[2],_=z.slice(3);a.paths.push({name:R,path:D,rest:_})}}}catch(X){n.e(X)}finally{n.f()}return a}(h):void 0}),[h]);return r.a.createElement("div",null,r.a.createElement(W,{onData:function(e){F({dataset:e}),S()},onGraph:function(e){f(e)},onSettings:function(e){F(e),S()},onExportSVG:function(){I()(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var a="".concat(window.location.href,"#"),n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);n.nextNode();){var r,c=Object(v.a)(n.currentNode.attributes);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.value.includes(a)&&(l.value=l.value.replace(a,"#"))}}catch(i){c.e(i)}finally{c.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var o=(new window.XMLSerializer).serializeToString(e);return new Blob([o],{type:"image/svg+xml"})}(D.current))},settings:R}),a?r.a.createElement(d,{data:a,onModal:function(e){c(e)},onHide:function(){c(void 0)}}):null,r.a.createElement("div",{className:"flexcontainer"},r.a.createElement("div",{id:"sidebar",className:"sidebar"},r.a.createElement(C,{colorScheme:z,drawPaths:q,drawLabels:A,onColorChange:function(e){F({colorScheme:e}),S()},onDrawLabels:function(e){F({drawLabels:e}),S()},onPathDraw:function(e){F({drawPaths:e}),S()},onRedraw:function(){return G((function(e){return e+1}))}})),r.a.createElement("div",{className:"body"},b?r.a.createElement("div",{style:{color:"red"}},b):null,_?r.a.createElement(y,{graph:_,ref:D,redraw:L,color:z,drawLabels:A,drawPaths:q,onFeatureClick:function(e){c(e)},settings:R}):null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P.c,null,r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.9ef26f75.chunk.js.map