(this.webpackJsonpgenomegraph=this.webpackJsonpgenomegraph||[]).push([[0],{58:function(e){e.exports=JSON.parse('{"nodes":[{"id":"1","sequence":"TTGATA","tags":{"DP":3,"RC":18}},{"id":"2","sequence":"T","tags":{"DP":2,"RC":2}},{"id":"3","sequence":"G","tags":{"DP":1,"RC":1}},{"id":"4","sequence":"CCGACTAACGCA","tags":{"DP":3,"RC":36}},{"id":"5","sequence":"A","tags":{"DP":1,"RC":1}},{"id":"6","sequence":"G","tags":{"DP":2,"RC":2}},{"id":"7","sequence":"ATGCCA","tags":{"DP":3,"RC":18}}],"links":[{"source":"1","target":"2","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"1","target":"3","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"2","target":"4","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"3","target":"4","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"4","target":"5","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"4","target":"6","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"5","target":"7","strand1":"+","strand2":"+","cigar":"0M","tags":{}},{"source":"6","target":"7","strand1":"+","strand2":"+","cigar":"0M","tags":{}}],"paths":[{"name":"seq1","path":"1+,2+,4+,5+,7+","rest":["*"]},{"name":"seq2","path":"1+,3+,4+,6+,7+","rest":["*"]},{"name":"seq3","path":"1+,2+,4+,6+,7+","rest":["*"]}]}')},63:function(e,t,a){e.exports=a(77)},68:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),l=(a(68),a(13)),s=a(82),i=a(56);function u(e){var t=e.show,a=e.onHide;e.onResult;return r.a.createElement(s.a,{show:t,onHide:a},r.a.createElement(s.a.Header,{closeButton:!0},r.a.createElement(s.a.Title,null,"Modal title")),r.a.createElement(s.a.Body,null,"Contents",r.a.createElement(s.a.Footer,null,r.a.createElement(i.a,{variant:"secondary",onClick:a},"Close"))))}function d(e){var t=e.data,a=e.onHide;return r.a.createElement(s.a,{show:!0,onHide:a},r.a.createElement(s.a.Header,{closeButton:!0},r.a.createElement(s.a.Title,null,"Feature details")),r.a.createElement(s.a.Body,null,r.a.createElement("div",null,"Attributes"),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))})),r.a.createElement("hr",null),t.tags&&Object.keys(t.tags).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Tags"),Object.entries(t.tags).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))}))):null,r.a.createElement(s.a.Footer,null,r.a.createElement(i.a,{variant:"secondary",onClick:a},"Close"))))}var g=a(83),m=a(53),h=a(36),f=a.n(h),p=a(20),v=a(50),k=a(9),E=f.a.mark(x),b=f.a.mark(w);function x(e,t){var a,n,r,o,c;return f.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:a=e[0].linkNum,n=[],o=0;case 3:if(!(o<e.length)){l.next=17;break}if(c=e[o],a===c.linkNum){l.next=11;break}if(!r.id){l.next=9;break}return l.next=9,Object(p.a)({links:n},r);case 9:n=[],a=c.linkNum;case 11:r=t[o],n.push([c.source.x,c.source.y]),n.push([c.target.x,c.target.y]);case 14:o++,l.next=3;break;case 17:case"end":return l.stop()}}),E)}function w(e,t){var a,n,r;return f.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=0;case 1:if(!(a<e.length)){o.next=10;break}if(n=e[a],(r=t[a]).id){o.next=7;break}return o.next=7,{links:[[n.source.x,n.source.y],[n.target.x,n.target.y]],original:r};case 7:a++,o.next=1;break;case 10:case"end":return o.stop()}}),b)}var y=r.a.forwardRef((function(e,t){var a=e.graph,o=(e.path,e.blockSize),c=void 0===o?1e3:o,l=e.contigThickness,s=void 0===l?10:l,i=(e.edgeThickness,e.color),u=void 0===i?"Rainbow":i,d=e.width,g=void 0===d?1e3:d,h=e.height,f=void 0===h?1e3:h,E=e.steps,b=void 0===E?500:E,y=e.onFeatureClick,O=void 0===y?function(){console.log("no feature click configured")}:y,j=Object(n.useMemo)((function(){return function(e,t){for(var a={nodes:[],links:[]},n={},r=0;r<(e.paths||{}).length;r++)for(var o=e.paths[r],c=o.path.split(","),l=0;l<c.length-1;l++){var s="".concat(c[l],"_").concat(c[l+1]);n[s]?n[s].push(o.name):n[s]=[o.name]}for(var i=0;i<e.nodes.length;i++){var u=e.nodes[i],d=u.id,g=u.sequence,m=Object(v.a)(u,["id","sequence"]),h=[];h.push(Object(p.a)({},m,{id:"".concat(d,"-start")}));for(var f=t;f<g.length-t;f+=t)h.push(Object(p.a)({},m,{id:"".concat(d,"-").concat(f)}));h.push(Object(p.a)({},m,{id:"".concat(d,"-end")}));for(var k=0;k<h.length-1;k++){var E=h[k].id,b=h[k+1].id;a.links.push(Object(p.a)({},m,{source:E,target:b,id:d,linkNum:i,length:g.length,sequence:g}))}a.nodes=a.nodes.concat(h)}for(var x=0;x<e.links.length;x++){var w=e.links[x],y=w.strand1,O=w.strand2,j=w.source,C=w.target,N=Object(v.a)(w,["strand1","strand2","source","target"]),M=n["".concat(j).concat(y,"_").concat(C).concat(O)]||[],T=j===C;"+"===y&&"+"===O?a.links.push(Object(p.a)({source:"".concat(j,"-end"),target:"".concat(C,"-start"),loop:T,paths:M},N)):"-"===y&&"+"===O?a.links.push(Object(p.a)({source:"".concat(j,"-start"),target:"".concat(C,"-start"),loop:T,paths:M},N)):"-"===y&&"-"===O?a.links.push(Object(p.a)({source:"".concat(j,"-start"),target:"".concat(C,"-end"),loop:T,paths:M},N)):"+"===y&&"-"===O&&a.links.push(Object(p.a)({source:"".concat(j,"-end"),target:"".concat(C,"-end"),loop:T,paths:M},N))}return a}(a,c)}),[c,a]),C=Object(n.useMemo)((function(){for(var e=j.links.map((function(e){return Object.create(e)})),t=j.nodes.map((function(e){return Object.create(e)})),a=0,n=0;n<j.links.length;n++)a=Math.max(a,(j.links[n].sequence||{}).length||0);for(var r=k.forceSimulation(t).force("link",k.forceLink(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10}))).force("charge",k.forceManyBody().strength(-100)).force("center",k.forceCenter(g/2,f/2)),o=0;o<b;++o)r.tick();return e}),[j,f,b,g]);Object(n.useEffect)((function(){k.select("svg").call(k.zoom().extent([[0,0],[g,f]]).scaleExtent([.1,8]).on("zoom",(function(){k.select(".gref").attr("transform",k.event.transform)})))}),[f,t,g]);var N=Object(m.a)(x(C,j.links)),M=Object(m.a)(w(C,j.links)),T=(M.reduce((function(e,t){return Math.max(t.original.score,e)}),0),{});(a.paths||[]).forEach((function(e){T[e.name]=k.interpolateTurbo(Math.random())})),console.log({paths:N,links:C});var q={};return N.forEach((function(e){console.log(e.source,e.target),e.source.endsWith("start")?(q[e.source]={source:C[e.linkNum].target,target:C[e.linkNum].source},q[e.target]={target:C[e.linkNum].target,source:C[e.linkNum].source}):(console.log("here"),q[e.source]={source:C[e.linkNum].source,target:C[e.linkNum].target},q[e.target]={target:C[e.linkNum].source,source:C[e.linkNum].target})})),r.a.createElement("svg",{ref:t,viewBox:[0,0,g,f].toString()},r.a.createElement("g",{className:"gref"},M.map((function(e){var t=k.line().context(null),a=e.links[0][0],n=e.links[0][1],o=e.links[1][0],c=e.links[1][1],l=o-a,s=c-n,i=Math.sqrt(l*l+s*s),u=i,d=i,g=0,m=0;e.original.loop?(g=90,m=1,u=-30,d=-20,o+=1,c+=1,"M".concat(a,",").concat(n,"A").concat(u,",").concat(d," ").concat(g,",").concat(m,",").concat(0," ").concat(o,",").concat(c)):t(e.links);var h=q[e.original.source],f=h.source,p=h.target,v=q[e.original.target],E=v.source,b=v.target,x=(p.y,f.y,p.x,f.x,b.y,E.y,b.x,E.x,Math.sqrt((p.y-f.y)*(p.y-f.y)+(p.x-f.x)*(p.x-f.x))),w=Math.sqrt((b.y-E.y)*(b.y-E.y)+(b.x-E.x)*(b.x-E.x));return r.a.createElement(r.a.Fragment,null,e.original.paths.map((function(t){var l=(60+50*Math.random())/x,s=(60+50*Math.random())/w,i=(1-l)*f.x+l*p.x,u=(1-l)*f.y+l*p.y,d=(1-s)*E.x+s*b.x,g=(1-s)*E.y+s*b.y,m=k.path();return m.moveTo(a,n),m.bezierCurveTo(i,u,d,g,o,c),console.log(T,t),r.a.createElement("path",{d:m,strokeWidth:2,stroke:T[t],fill:"none",onClick:function(){return O(e.original)}})})))})),N.map((function(e,t){var a=k.line().context(null);return r.a.createElement("path",{d:a(e.links),title:e.id,strokeWidth:s,stroke:u.startsWith("Just")?u.replace("Just","").toLowerCase():k.hsl(k["interpolate".concat(u)](t/N.length)).darker(),fill:"none",onClick:function(){return O(e)}},r.a.createElement("title",null,e.id))}))))})),O=a(57),j=(a(51),a(52));function C(e){var t=Object(n.useState)("Rainbow"),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)("Edge"),u=Object(l.a)(s,2),d=u[0],m=u[1],h=Object(n.useRef)();return r.a.createElement("div",null,r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Control,{value:o,onChange:function(e){return c(e.target.value)},as:"select"},r.a.createElement("option",null,"JustGrey"),r.a.createElement("option",null,"Turbo"),r.a.createElement("option",null,"Rainbow"),r.a.createElement("option",null,"Spectral"),r.a.createElement("option",null,"Viridis"),r.a.createElement("option",null,"RdYlBu")),r.a.createElement(g.a.Control,{value:d,onChange:function(e){return m(e.target.value)},as:"select"},r.a.createElement("option",null,"Edge"),r.a.createElement("option",null,"Node"),r.a.createElement("option",null,"Edge+node"),r.a.createElement("option",null,"None")),r.a.createElement(i.a,{onClick:function(){return Object(O.saveAs)(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var a="".concat(window.location.href,"#"),n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);n.nextNode();){var r,o=Object(j.a)(n.currentNode.attributes);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.value.includes(a)&&(c.value=c.value.replace(a,"#"))}}catch(s){o.e(s)}finally{o.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var l=(new window.XMLSerializer).serializeToString(e);return new Blob([l],{type:"image/svg+xml"})}(h.current))}},"Export SVG")),r.a.createElement(y,Object.assign({ref:h},e,{color:o,path:d})))}var N=a(85),M=a(86),T=a(84),q=(a(74),a(75),a(58));function S(e){var t=e.onOpen;return r.a.createElement(N.a,{bg:"light",expand:"lg"},r.a.createElement(N.a.Brand,{href:"#home"},"graphgenome browser"),r.a.createElement(N.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(N.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(M.a,{className:"mr-auto"},r.a.createElement(T.a,{title:"File",id:"basic-nav-dropdown"},r.a.createElement(T.a.Item,{onClick:function(){return t(!0)}},"Open")),r.a.createElement(M.a.Link,{href:"#link"},"About"))))}var A=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(),s=Object(l.a)(c,2),i=s[0],g=s[1],m=Object(n.useCallback)((function(e){g(e)}),[]);return r.a.createElement("div",null,r.a.createElement(S,{onOpen:function(){o(!0)}}),r.a.createElement(u,{show:a,onHide:function(){return o(!1)}}),i?r.a.createElement(d,{data:i,onModal:function(e){g(e)},onHide:function(){g(void 0)}}):null,r.a.createElement("div",{className:"flexcontainer"},r.a.createElement("div",{id:"sidebar",className:"sidebar"},r.a.createElement(C,{graph:q,onFeatureClick:m}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.9d892786.chunk.js.map