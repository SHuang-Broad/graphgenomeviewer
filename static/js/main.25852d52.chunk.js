(this.webpackJsonpapp2=this.webpackJsonpapp2||[]).push([[0],{69:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),i=n(21),s=n.n(i),o=(n(69),n(11)),l=n.n(o),u=n(44),j=n(42),h=n(8),d=n(97),b=n(61);function O(e){var t=e.data,n=e.onHide;return Object(a.jsxs)(d.a,{show:!0,onHide:n,children:[Object(a.jsx)(d.a.Header,{closeButton:!0,children:Object(a.jsx)(d.a.Title,{children:"Feature details"})}),Object(a.jsxs)(d.a.Body,{children:[Object(a.jsx)("div",{children:"Attributes"}),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(h.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)("div",{style:{display:"flex",maxHeight:150,margin:3},children:[Object(a.jsx)("div",{style:{backgroundColor:"#dda",minWidth:100},children:n}),Object(a.jsx)("div",{style:{wordBreak:"break-word",overflow:"auto"},children:String(c)})]},"".concat(n,"_").concat(c))})),Object(a.jsx)("hr",{}),t.tags&&Object.keys(t.tags).length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Tags"}),Object.entries(t.tags).map((function(e){var t=Object(h.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)("div",{style:{display:"flex",maxHeight:150,margin:3},children:[Object(a.jsx)("div",{style:{backgroundColor:"#dda",minWidth:100},children:n}),Object(a.jsx)("div",{style:{wordBreak:"break-word",overflow:"auto"},children:String(c)})]},"".concat(n,"_").concat(c))}))]}):null,Object(a.jsx)(d.a.Footer,{children:Object(a.jsx)(b.a,{variant:"secondary",onClick:n,children:"Close"})})]})]})}var f=n(54),g=n(9),p=n(14);function x(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push([a.source.x,a.source.y])}var c=e[n-1];return t.push([c.target.x,c.target.y]),t}function m(e,t){var n;return(n="linkNum",e.reduce((function(e,t){var a=n instanceof Function?n(t):t[n];if(void 0!==a){var c=e.find((function(e){return e&&e.key===a}));c?c.values.push(t):e.push({key:a,values:[t]})}return e}),[])).map((function(e){return{links:x(e.values),original:t[e.key]}}))}function v(e,t,n,a,c){var r=Math.sqrt(Math.pow(a-t,2)+Math.pow(n-e,2));return[n+c*((n-e)/r),a+c*((a-t)/r)]}function k(e){var t=e.path,n=e.drawLabels,a=e.sequenceThickness,c=e.stroke,i=e.onFeatureClick,s=p.line().context(null),o=t.links[0],l=t.links[1],u=t.links[t.links.length-1],j=t.links[t.links.length-2],d=v(l[0],l[1],o[0],o[1],100),b=Object(h.a)(d,2),O=b[0],g=b[1],x=v(j[0],j[1],u[0],u[1],100),m=Object(h.a)(x,2),k=m[0],w=m[1],y=s([[O,g]].concat(Object(f.a)(t.links),[[k,w]]));return r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:t.original.id,d:s(t.links),strokeWidth:a,stroke:c,fill:"none",onClick:function(){return i(t.original)}},r.a.createElement("title",null,t.original.id)),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:"".concat(t.original.id,"_invisible"),d:y,fill:"none"}),r.a.createElement("text",{dy:12},r.a.createElement("textPath",{startOffset:"50%",textAnchor:"middle",href:"#".concat(t.original.id,"_invisible")},t.original.id))):null)}var w=r.a.forwardRef((function(e,t){var n=Object(c.useRef)(),a=e.graph,i=e.drawPaths,s=void 0!==i&&i,o=e.drawLabels,l=void 0!==o&&o,u=e.drag,d=void 0!==u&&u,b=e.settings,O=b.chunkSize,f=void 0===O?1e3:O,x=b.forceSteps,w=void 0===x?500:x,y=b.linkSteps,C=void 0===y?3:y,S=b.sequenceThickness,T=void 0===S?10:S,L=b.linkThickness,E=void 0===L?2:L,G=b.theta,M=void 0===G?.9:G,H=b.forceType,B=void 0===H?"center":H,F=b.strengthCenter,N=void 0===F?-50:F,q=b.strengthXY,z=void 0===q?.3:q,A=e.color,D=void 0===A?"Rainbow":A,I=e.width,P=void 0===I?2e3:I,R=e.height,W=void 0===R?1e3:R,_=e.redraw,X=void 0===_?0:_,Y=e.onFeatureClick,J=void 0===Y?function(){console.log("no feature click configured")}:Y,U=Object(c.useRef)(p.zoom().extent([[0,0],[P,W]]).scaleExtent([.1,8])),V=Object(c.useMemo)((function(){return function(e,t){for(var n={nodes:[],links:[]},a={},c=0;c<(e.paths||{}).length;c++)for(var r=e.paths[c],i=r.path.split(","),s=0;s<i.length-1;s++){var o="".concat(i[s],"_").concat(i[s+1]);a[o]?a[o].push(r.name):a[o]=[r.name]}for(var l=0;l<e.nodes.length;l++){var u=e.nodes[l],h=u.id,d=u.sequence,b=u.length,O=Object(j.a)(u,["id","sequence","length"]),f=[];f.push(Object(g.a)(Object(g.a)({},O),{},{id:"".concat(h,"-start")}));for(var p=t;p<b-t;p+=t)f.push(Object(g.a)(Object(g.a)({},O),{},{id:"".concat(h,"-").concat(p)}));f.push(Object(g.a)(Object(g.a)({},O),{},{id:"".concat(h,"-end")}));for(var x=0;x<f.length-1;x++){var m=f[x].id,v=f[x+1].id;n.links.push(Object(g.a)(Object(g.a)({},O),{},{source:m,target:v,id:h,length:b,sequence:d,linkNum:l}))}n.nodes=n.nodes.concat(f)}for(var k=0;k<e.links.length;k++){var w=e.links[k],y=w.strand1,C=w.strand2,S=w.source,T=w.target,L=Object(j.a)(w,["strand1","strand2","source","target"]),E=a["".concat(S).concat(y,"_").concat(T).concat(C)]||[],G=S===T,M=Object(g.a)({source:"".concat(S,"-").concat("+"===y?"end":"start"),target:"".concat(T,"-").concat("+"===C?"start":"end")},L);G&&(M.loop=!0),E.length&&(M.paths=E),n.links.push(M)}return n}(a,f)}),[f,a]),Z=Object(c.useMemo)((function(){return Object.fromEntries((a.paths||[]).map((function(e,t){return[e.name,p.schemeCategory10[t]]})))}),[a.paths]),K=Object(c.useMemo)((function(){var e=V.links.map((function(e){return Object.create(Object(g.a)(Object(g.a)({},e),{},{x:Math.random(),y:Math.random()}))})),t=V.nodes.map((function(e){return Object.create(Object(g.a)(Object(g.a)({},e),{},{x:Math.random(),y:Math.random()}))})),n=p.forceSimulation(t).force("link",p.forceLink(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10})).iterations(C)).force("charge",p.forceManyBody().strength(N).theta(M));"center"===B?n.force("center",p.forceCenter(P/3,W/3)):"xy"===B&&n.force("x",p.forceX().x(P/3).strength(z)).force("y",p.forceY().y(W/3).strength(z));for(var a=0;a<w;++a)n.tick();return e}),[V.links,V.nodes,C,N,M,B,X,P,W,z,w]);Object(c.useEffect)((function(){var e=p.select(t.current);d?e.call(U.current.on("zoom",(function(e){p.select(n.current).attr("transform",e.transform)}))):e.on(".zoom",null)}),[d,W,t,P,U]);for(var Q=m(K,a.nodes),$=function(e,t){for(var n=[],a=0;a<e.length;a++){var c=e[a],r=t[a];r.id||n.push({links:[[c.source.x,c.source.y],[c.target.x,c.target.y]],original:r})}return n}(K,V.links),ee={},te=0;te<Q.length;te++){var ne=Q[te],ae=ne.links.length;ee["".concat(ne.original.id,"-start")]=[ne.links[1],ne.links[0]],ee["".concat(ne.original.id,"-end")]=[ne.links[ae-2],ne.links[ae-1]]}return r.a.createElement("svg",{width:"100%",height:"100%",ref:t,style:{fontSize:10},viewBox:[0,0,P,W].toString()},r.a.createElement("g",{ref:n},$.map((function(e,t){var n=e.links[0][0],a=e.links[0][1],c=e.links[1][0],i=e.links[1][1];if(s){var o=Object(h.a)(ee[e.original.source],2),l=o[0],u=o[1],j=Object(h.a)(ee[e.original.target],2),d=j[0],b=j[1],O=(i-a)/(c-n),f=(l[1]-u[1])/(l[0]-u[0]),g=(d[1]-b[1])/(d[0]-b[0]);return Math.abs(O-f)<.2||Math.abs(O-g)<.2?e.original.paths?e.original.paths.map((function(t,s){var o=c-n,l=i-a,u=Math.sqrt(o*o+l*l)+40*Math.random(),j=s%2,h="M".concat(n,",").concat(a,"A").concat(u,",").concat(u," 0 0,").concat(j," ").concat(c,",").concat(i);return r.a.createElement("path",{key:"".concat(h,"-").concat(s),d:h,strokeWidth:E,stroke:Z[t],fill:"none",onClick:function(){return J(e.original)}},r.a.createElement("title",null,t))})):null:e.original.paths?e.original.paths.map((function(t,s){var o=v(l[0],l[1],u[0],u[1],60+30*s),j=Object(h.a)(o,2),O=j[0],f=j[1],g=v(d[0],d[1],b[0],b[1],60+30*s),x=Object(h.a)(g,2),m=x[0],k=x[1],w=p.path();return w.moveTo(n,a),w.bezierCurveTo(O,f,m,k,c,i),r.a.createElement("path",{key:"".concat(w.toString(),"-").concat(s),d:w,strokeWidth:E,stroke:Z[t],fill:"none",onClick:function(){return J(e.original)}},r.a.createElement("title",null,t))})):null}var x=Object(h.a)(ee[e.original.source],2),m=x[0],k=x[1],w=Object(h.a)(ee[e.original.target],2),y=w[0],C=w[1],S=(i-a)/(c-n),T=(m[1]-k[1])/(m[0]-k[0]),L=(y[1]-C[1])/(y[0]-C[0]),G=p.line().context(null),M=e.original.loop&&!(S-T<.5||S-L<.5)?"M".concat(n,",").concat(a,"A").concat(-30,",").concat(-20," ").concat(90,",").concat(1,",").concat(0," ").concat(c,",").concat(i):G(e.links);return r.a.createElement("path",{key:"".concat(M.toString(),"-").concat(t),d:M,strokeWidth:E,stroke:"black",fill:"none",onClick:function(){return J(e.original)}})})),Q.map((function(e,t){var n=D.startsWith("Just")?D.replace("Just","").toLowerCase():p.hsl(p["interpolate".concat(D)](t/Q.length)).darker();return r.a.createElement(k,{key:e.original.id,sequenceThickness:T,drawLabels:l,path:e,stroke:n,onFeatureClick:J})}))))})),y=n(98);function C(e){var t=e.onDrawLabels,n=e.drawLabels,c=e.drawPaths,r=e.drag,i=e.onDrag,s=e.onColorChange,o=e.onPathDraw,l=e.onRedraw,u=e.colorScheme;return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Settings"}),Object(a.jsx)(y.a.Label,{children:"Color"}),Object(a.jsxs)(y.a.Control,{value:u,onChange:function(e){return s(e.target.value)},as:"select",children:[Object(a.jsx)("option",{children:"JustGrey"}),Object(a.jsx)("option",{children:"Turbo"}),Object(a.jsx)("option",{children:"Rainbow"}),Object(a.jsx)("option",{children:"Spectral"}),Object(a.jsx)("option",{children:"Viridis"}),Object(a.jsx)("option",{children:"RdYlBu"})]}),Object(a.jsx)("br",{}),Object(a.jsx)(y.a.Group,{children:Object(a.jsx)(y.a.Check,{onChange:function(e){o(e.target.checked)},type:"checkbox",label:"Draw paths",checked:c})}),Object(a.jsx)(y.a.Group,{children:Object(a.jsx)(y.a.Check,{onChange:function(e){t(e.target.checked)},type:"checkbox",label:"Draw labels",checked:n})}),Object(a.jsx)(y.a.Group,{children:Object(a.jsx)(y.a.Check,{onChange:function(e){i(e.target.checked)},type:"checkbox",label:"Enable panning/zooming?",checked:r})}),Object(a.jsx)("br",{}),Object(a.jsx)(b.a,{onClick:function(){return l()},children:"Redraw"})]})}var S=n(99),T=n(100),L=n(96),E=n(95),G=n(62);function M(e){var t=e.onHide,n=e.settings,r=e.onSettings,i=Object(c.useState)(n),s=Object(h.a)(i,2),o=s[0],l=s[1],u=o.chunkSize,j=o.forceSteps,O=o.linkSteps,f=o.strengthCenter,p=o.strengthXY,x=o.forceType,m=o.theta,v=o.sequenceThickness,k=o.linkThickness;return Object(a.jsxs)(d.a,{show:!0,onHide:t,size:"lg",children:[Object(a.jsx)(d.a.Header,{closeButton:!0,children:Object(a.jsx)(d.a.Title,{children:"Settings"})}),Object(a.jsx)(d.a.Body,{children:Object(a.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),r(Object(g.a)(Object(g.a)({},o),{},{chunkSize:+u,forceType:x,forceSteps:+j,linkSteps:+O,strengthCenter:+f,theta:+m,sequenceThickness:+v,linkThickness:+k})),t()},children:[Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Number of simulation steps for the nodes",Object(a.jsx)(y.a.Text,{muted:!0,children:"Used in the force-based layout simulation"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:j,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{forceSteps:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Number of simulation steps for the links",Object(a.jsx)(y.a.Text,{muted:!0,children:"Increases the rigidity of the link based constraints"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:O,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{linkSteps:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Sequence chunk size",Object(a.jsx)(y.a.Text,{muted:!0,children:"If a contig is of length 5000, then chunk length 1000 would become 5 segments. Note that contigs smaller than the chunk length may not be proportionally sized"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:u,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{chunkSize:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Theta",Object(a.jsx)(y.a.Text,{muted:!0,children:"Parameter for the force directed layout"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:m,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{theta:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Strength (force xy)",Object(a.jsx)(y.a.Text,{muted:!0,children:"This parameter should be between [0,1], applies to the XY layout"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:p,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{strengthXY:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Strength (particle charge)",Object(a.jsx)(y.a.Text,{muted:!0,children:"This value is like a charged particle force, by being negative it keeps things farther apart"})]}),Object(a.jsx)(G.a,{children:Object(a.jsx)(y.a.Control,{type:"number",value:f,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{strengthCenter:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsxs)(y.a.Label,{column:!0,sm:"4",children:["Force type",Object(a.jsx)(y.a.Text,{muted:!0,children:"Force XY results in a circular style layout that can be helpful for more disjoint graphs, force center is default"})]}),Object(a.jsx)(G.a,{children:Object(a.jsxs)(y.a.Control,{value:x,onChange:function(e){return l((function(t){return Object(g.a)(Object(g.a)({},t),{},{forceType:e.target.value})}))},as:"select",children:[Object(a.jsx)("option",{children:"center"}),Object(a.jsx)("option",{children:"xy"})]})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsx)(y.a.Label,{column:!0,sm:"4",children:"Sequence thickness"}),Object(a.jsx)(G.a,{children:Object(a.jsx)("input",{type:"range",min:1,max:100,style:{width:"100%"},value:v,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{sequenceThickness:t})}))}})})]}),Object(a.jsxs)(y.a.Group,{as:E.a,children:[Object(a.jsx)(y.a.Label,{column:!0,sm:"4",children:"Link thickness"}),Object(a.jsx)(G.a,{children:Object(a.jsx)("input",{type:"range",min:1,max:100,style:{width:"100%"},value:k,onChange:function(e){var t=e.target.value;l((function(e){return Object(g.a)(Object(g.a)({},e),{},{linkThickness:t})}))}})})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}function H(e){var t=e.onHide;return Object(a.jsxs)(d.a,{show:!0,onHide:t,children:[Object(a.jsx)(d.a.Header,{closeButton:!0,children:Object(a.jsx)(d.a.Title,{children:"graphgenome browser"})}),Object(a.jsxs)(d.a.Body,{children:[Object(a.jsx)("p",{children:"This is a small demo of browsing simple graph genomes. The app can read GFA format URLs and local files, all processing is done client side currently."}),Object(a.jsxs)("p",{children:["Contact ",Object(a.jsx)("a",{href:"mainto:colin.diesh@gmail.com",children:"Colin Diesh"})]}),Object(a.jsxs)("p",{children:["Thanks to the BCC2020 pangenome team, and"," ",Object(a.jsx)("a",{href:"https://github.com/rrwick/Bandage",children:"Bandage"})," for inspiration."]}),Object(a.jsx)("p",{children:"Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and gfalint (Shaun Jackman)"}),Object(a.jsx)("p",{children:"This app attempts to support GFA2 but does not properly render fragments, intricate edge details, or U and O paths"}),Object(a.jsx)("a",{href:"https://github.com/cmdcolin/graphgenomeviewer",children:"GitHub"})]})]})}function B(e){var t=e.onHide,n=e.onData,r=Object(c.useState)(),i=Object(h.a)(r,2),s=i[0],o=i[1];return Object(a.jsxs)(d.a,{show:!0,onHide:t,children:[Object(a.jsx)(d.a.Header,{closeButton:!0,children:Object(a.jsx)(d.a.Title,{children:"graphgenome browser"})}),Object(a.jsx)(d.a.Body,{children:Object(a.jsxs)(y.a,{onSubmit:function(){n(s),t()},children:[Object(a.jsxs)(y.a.Group,{children:[Object(a.jsx)(y.a.Label,{children:"Enter URL"}),Object(a.jsx)(y.a.Control,{type:"input",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}function F(e){var t=e.onHide,n=e.onGraph,r=Object(c.useRef)();return Object(a.jsxs)(d.a,{show:!0,onHide:t,children:[Object(a.jsx)(d.a.Header,{closeButton:!0,children:Object(a.jsx)(d.a.Title,{children:"Open file"})}),Object(a.jsx)(d.a.Body,{children:Object(a.jsxs)(y.a,{onSubmit:function(){var e=Object(u.a)(l.a.mark((function e(a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,r.current.files[0].text();case 3:c=e.sent,n(c),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsxs)(y.a.Group,{children:[Object(a.jsx)(y.a.Label,{children:"Open file"}),Object(a.jsx)(y.a.Control,{ref:r,type:"file"})]}),Object(a.jsx)(b.a,{type:"submit",children:"Submit"})]})})]})}function N(e){var t=e.onData,n=e.settings,r=e.onGraph,i=e.onExportSVG,s=e.onSettings,o=Object(c.useState)(),l=Object(h.a)(o,2),u=l[0],j=l[1],d=Object(c.useState)(),b=Object(h.a)(d,2),O=b[0],f=b[1],g=Object(c.useState)(),p=Object(h.a)(g,2),x=p[0],m=p[1],v=Object(c.useState)(),k=Object(h.a)(v,2),w=k[0],y=k[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(S.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(S.a.Brand,{href:"#home",children:"graphgenome browser"}),Object(a.jsx)(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(S.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(T.a,{className:"mr-auto",children:[Object(a.jsxs)(L.a,{title:"File",id:"basic-nav-dropdown",children:[Object(a.jsx)(L.a.Item,{onClick:function(){return m(!0)},children:"Open URL"}),Object(a.jsx)(L.a.Item,{onClick:function(){return y(!0)},children:"Open file"}),Object(a.jsx)(L.a.Item,{onClick:function(){return i()},children:"Export SVG"})]}),Object(a.jsxs)(L.a,{title:"Examples",id:"basic-nav-dropdown",children:[Object(a.jsx)(L.a.Item,{onClick:function(){return t("MT.gfa")},children:"MT GFA-spec example"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("toy_pangenome.gfa")},children:"Paths example"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("example1.gfa")},children:"Paths example 2"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("big1.gfa")},children:"Big1"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("ir1.gfa")},children:"Ir1"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("test_contig_placement_assembly_graph.gfa")},children:"Unicycler example"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("circle.gfa")},children:"Simple circle"}),Object(a.jsx)(L.a.Item,{onClick:function(){return t("example1.gfa2")},children:"GFA2.0 example"})]}),Object(a.jsx)(T.a.Link,{onClick:function(){f(!0)},children:"Settings"}),Object(a.jsx)(T.a.Link,{onClick:function(){j(!0)},children:"About"})]})})]}),u?Object(a.jsx)(H,{onHide:function(){return j(!1)}}):null,O?Object(a.jsx)(M,{settings:n,onHide:function(){return f(!1)},onSettings:s}):null,x?Object(a.jsx)(B,{onData:t,onHide:function(){return m(!1)}}):null,w?Object(a.jsx)(F,{onGraph:r,onHide:function(){return y(!1)}}):null]})}var q=n(37),z=n(3);function A(e,t){var n=e.split(":"),a=Object(h.a)(n,3),c=a[0],r=a[1],i=a[2];"i"===r?t[c]=+i:"Z"===r&&(t[c]=i)}var D=n(63),I=n.n(D),P=n(10);n(88),n(89);var R=function(){var e=Object(c.useState)(),t=Object(h.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(),o=Object(h.a)(s,2),d=o[0],b=o[1],f=Object(c.useState)(),g=Object(h.a)(f,2),p=g[0],x=g[1],m=Object(c.useState)(),v=Object(h.a)(m,2)[1],k=r.a.useCallback((function(){return v({})}),[]),y=Object(c.useState)(0),S=Object(h.a)(y,2),T=S[0],L=S[1],E=Object(P.e)({strengthCenter:Object(P.f)(P.b,-50),strengthXY:Object(P.f)(P.b,.1),chunkSize:Object(P.f)(P.b,1e3),forceSteps:Object(P.f)(P.b,200),linkSteps:Object(P.f)(P.b,1),sequenceThickness:Object(P.f)(P.b,10),linkThickness:Object(P.f)(P.b,2),theta:Object(P.f)(P.b,.9),forceType:Object(P.f)(P.d,"center"),dataset:Object(P.f)(P.d,"MT.gfa"),colorScheme:Object(P.f)(P.d,"Rainbow"),drawLabels:Object(P.f)(P.a,!1),drawPaths:Object(P.f)(P.a,!1),drag:Object(P.f)(P.a,!0)}),G=Object(h.a)(E,2),M=G[0],H=G[1],B=M.dataset,F=M.drawLabels,D=M.drawPaths,R=M.colorScheme,W=M.drag,_=Object(j.a)(M,["dataset","drawLabels","drawPaths","colorScheme","drag"]),X=Object(c.useRef)();Object(c.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(B);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch ".concat(t.statusText));case 6:return e.next=8,t.text();case 8:n=e.sent,b(n),x(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),x(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[B]);var Y=Object(c.useMemo)((function(){return d?function(e){var t,n={nodes:[],links:[],paths:[],header:[]},a=Object(z.a)(e.split("\n"));try{for(a.s();!(t=a.n()).done;){var c=t.value;if(c.startsWith("H")&&function(){var e={},t=c.split("\t");Object(q.a)(t).slice(1).forEach((function(t){return A(t,e)})),n.header.push(e)}(),c.startsWith("S")){var r=c.split("\t"),i=Object(q.a)(r),s=i[1],o=i.slice(2),l=0,u="",j=void 0,h=!1;+o[0]?(l=+o[0],u=o[1],j=o.slice(2)):(h=!0,l=(u=o[0]).length,j=o.slice(1));for(var d={},b=0;b<j.length;b++)A(o[b],d);h&&d.LN&&(l=d.LN),n.nodes.push({id:s,length:l,sequence:u,tags:d})}else if(c.startsWith("E")){for(var O=c.split("\t"),f=Object(q.a)(O),g=f[2],p=f[3],x=f[8],m=f.slice(9),v=g.slice(0,-1),k=p.slice(0,-1),w=g.charAt(g.length-1),y=g.charAt(p.length-1),C={},S=0;S<m.length;S++)A(m[S],C);n.links.push({source:v,target:k,strand1:w,strand2:y,cigar:x,tags:C})}else if(c.startsWith("L")){for(var T=c.split("\t"),L=Object(q.a)(T),E=L[1],G=L[2],M=L[3],H=L[4],B=L[5],F=L.slice(6),N={},D=0;D<F.length;D++)A(F[D],N);n.links.push({source:E,target:M,strand1:G,strand2:H,cigar:B,tags:N})}else if(c.startsWith("P")){var I=c.split("\t"),P=Object(q.a)(I),R=P[1],W=P[2],_=P.slice(3);n.paths.push({name:R,path:W,rest:_})}}}catch(X){a.e(X)}finally{a.f()}return n}(d):void 0}),[d]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(N,{onData:function(e){H({dataset:e}),k()},onGraph:function(e){b(e)},onSettings:function(e){H(e),k()},onExportSVG:function(){I()(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var n="".concat(window.location.href,"#"),a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();){var c,r=Object(z.a)(a.currentNode.attributes);try{for(r.s();!(c=r.n()).done;){var i=c.value;i.value.includes(n)&&(i.value=i.value.replace(n,"#"))}}catch(o){r.e(o)}finally{r.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var s=(new window.XMLSerializer).serializeToString(e);return new Blob([s],{type:"image/svg+xml"})}(X.current))},settings:_}),n?Object(a.jsx)(O,{data:n,onModal:function(e){i(e)},onHide:function(){i(void 0)}}):null,Object(a.jsxs)("div",{className:"flexcontainer",children:[Object(a.jsx)("div",{id:"sidebar",className:"sidebar",children:Object(a.jsx)(C,{colorScheme:R,drawPaths:D,drawLabels:F,drag:W,onColorChange:function(e){H({colorScheme:e}),k()},onDrawLabels:function(e){H({drawLabels:e}),k()},onDrag:function(e){H({drag:e}),k()},onPathDraw:function(e){H({drawPaths:e}),k()},onRedraw:function(){return L((function(e){return e+1}))}})}),Object(a.jsxs)("div",{className:"body",children:[p?Object(a.jsx)("div",{style:{color:"red"},children:p}):null,Y?Object(a.jsx)(w,{graph:Y,ref:X,redraw:T,drag:W,color:R,drawLabels:F,drawPaths:D,onFeatureClick:function(e){i(e)},settings:_}):null]})]})]})};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(P.c,{children:Object(a.jsx)(R,{})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.25852d52.chunk.js.map