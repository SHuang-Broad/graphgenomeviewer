(this.webpackJsonpgenomegraph=this.webpackJsonpgenomegraph||[]).push([[0],{68:function(e,t,a){e.exports=a(94)},73:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(73),a(9)),i=a(33),u=a.n(i),s=a(42),m=a(37),h=a(6),f=a(100),d=a(60);function g(e){var t=e.data,a=e.onHide;return r.a.createElement(f.a,{show:!0,onHide:a},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"Feature details")),r.a.createElement(f.a.Body,null,r.a.createElement("div",null,"Attributes"),Object.entries(t).filter((function(e){return!["source","target","linkNum","tags"].includes(e[0])})).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))})),r.a.createElement("hr",null),t.tags&&Object.keys(t.tags).length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Tags"),Object.entries(t.tags).map((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{key:"".concat(a,"_").concat(n),style:{display:"flex",maxHeight:150,margin:3}},r.a.createElement("div",{style:{backgroundColor:"#dda",minWidth:100}},a),r.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto"}},String(n)))}))):null,r.a.createElement(f.a.Footer,null,r.a.createElement(d.a,{variant:"secondary",onClick:a},"Close"))))}var p=a(65),b=a(11),E=a(35),v=a(56);function k(e,t){var a=e.split(":"),n=Object(h.a)(a,3),r=n[0],c=n[1],l=n[2];"i"===c?t[r]=+l:"Z"===c&&(t[r]=l)}function y(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push([n.source.x,n.source.y])}var r=e[a-1];return t.push([r.target.x,r.target.y]),t}function O(e,t){var a;return(a="linkNum",e.reduce((function(e,t){var n=a instanceof Function?a(t):t[a];if(void 0!==n){var r=e.find((function(e){return e&&e.key===n}));r?r.values.push(t):e.push({key:n,values:[t]})}return e}),[])).map((function(e){return{links:y(e.values),original:t[e.key]}}))}function j(e,t,a,n,r){var c=r/Math.sqrt(Math.pow(n-t,2)+Math.pow(a-e,2));return[(1-c)*e+c*a,(1-c)*t+c*n]}var w=r.a.forwardRef((function(e,t){var a=Object(n.useRef)(),c=e.graph,l=e.drawPaths,i=void 0!==l&&l,u=e.drawLabels,s=void 0!==u&&u,f=e.settings,d=f.chunkSize,g=void 0===d?1e3:d,E=f.forceSteps,v=void 0===E?500:E,k=f.linkSteps,y=void 0===k?3:k,w=f.sequenceThickness,x=void 0===w?10:w,C=f.linkThickness,S=void 0===C?2:C,T=f.theta,L=void 0===T?.9:T,G=f.forceType,M=void 0===G?"center":G,H=f.strengthCenter,B=void 0===H?-50:H,N=f.strengthXY,F=void 0===N?.3:N,W=e.color,A=void 0===W?"Rainbow":W,I=e.width,q=void 0===I?2e3:I,z=e.height,R=void 0===z?1e3:z,D=e.redraw,_=void 0===D?0:D,P=e.onFeatureClick,X=void 0===P?function(){console.log("no feature click configured")}:P,Y=Object(n.useMemo)((function(){return function(e,t){for(var a={nodes:[],links:[]},n={},r=0;r<(e.paths||{}).length;r++)for(var c=e.paths[r],l=c.path.split(","),i=0;i<l.length-1;i++){var u="".concat(l[i],"_").concat(l[i+1]);n[u]?n[u].push(c.name):n[u]=[c.name]}for(var s=0;s<e.nodes.length;s++){var h=e.nodes[s],f=h.id,d=h.sequence,g=h.length,p=Object(m.a)(h,["id","sequence","length"]),b=[];b.push(Object(o.a)({},p,{id:"".concat(f,"-start")}));for(var E=t;E<g-t;E+=t)b.push(Object(o.a)({},p,{id:"".concat(f,"-").concat(E)}));b.push(Object(o.a)({},p,{id:"".concat(f,"-end")}));for(var v=0;v<b.length-1;v++){var k=b[v].id,y=b[v+1].id;a.links.push(Object(o.a)({},p,{source:k,target:y,id:f,length:g,sequence:d,linkNum:s}))}a.nodes=a.nodes.concat(b)}for(var O=0;O<e.links.length;O++){var j=e.links[O],w=j.strand1,x=j.strand2,C=j.source,S=j.target,T=Object(m.a)(j,["strand1","strand2","source","target"]),L=n["".concat(C).concat(w,"_").concat(S).concat(x)]||[],G=C===S,M=Object(o.a)({source:"".concat(C,"-").concat("+"===w?"end":"start"),target:"".concat(S,"-").concat("+"===x?"start":"end")},T);G&&(M.loop=!0),L.length&&(M.paths=L),a.links.push(M)}return a}(c,g)}),[g,c]),J=Object(n.useMemo)((function(){return Object.fromEntries((c.paths||[]).map((function(e,t){return[e.name,b.schemeCategory10[t]]})))}),[c.paths]),U=Object(n.useMemo)((function(){var e=Y.links.map((function(e){return Object.create(Object(o.a)({},e,{x:Math.random(),y:Math.random()}))})),t=Y.nodes.map((function(e){return Object.create(Object(o.a)({},e,{x:Math.random(),y:Math.random()}))})),a=b.forceSimulation(t).force("link",b.forceLink(e).id((function(e){return e.id})).distance((function(e){return e.sequence?1:10})).iterations(y)).force("charge",b.forceManyBody().strength(B).theta(L));"center"===M?a.force("center",b.forceCenter(q/3,R/3)):"xy"===M&&a.force("x",b.forceX().x(q/3).strength(F)).force("y",b.forceY().y(R/3).strength(F));for(var n=0;n<v;++n)a.tick();return e}),[Y.links,Y.nodes,y,B,L,M,_,q,R,F,v]);Object(n.useEffect)((function(){b.select(t.current).call(b.zoom().extent([[0,0],[q,R]]).scaleExtent([.1,8]).on("zoom",(function(){b.select(a.current).attr("transform",b.event.transform)})))}),[R,t,q]);for(var V=O(U,c.nodes),Z=function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n],c=t[n];c.id||a.push({links:[[r.source.x,r.source.y],[r.target.x,r.target.y]],original:c})}return a}(U,Y.links),$={},K=0;K<U.length;K++){var Q=Y.links[K],ee=Q.source,te=Q.target,ae=U[K].linkNum;void 0!==ae&&(ee.endsWith("start")?($[ee]={source:U[ae].target,target:U[ae].source},$[te]={target:U[ae].target,source:U[ae].source}):($[ee]={source:U[ae].source,target:U[ae].target},$[te]={target:U[ae].source,source:U[ae].target}))}return r.a.createElement("svg",{width:"100%",height:"100%",ref:t,style:{fontSize:10},viewBox:[0,0,q,R].toString()},r.a.createElement("g",{ref:a},Z.map((function(e,t){var a=e.links[0][0],n=e.links[0][1],c=e.links[1][0],l=e.links[1][1];if(i){if(!e.original.paths)return null;var o=$[e.original.source],u=o.source,s=o.target,m=$[e.original.target],f=m.source,d=m.target,g=(l-n)/(c-a),p=(u.y-s.y)/(u.x-s.x),E=(f.y-d.y)/(f.x-d.x);return Math.abs(g-p)<.5||Math.abs(g-E)<.5?e.original.paths.map((function(t,o){var i=c-a,u=l-n,s=Math.sqrt(i*i+u*u)+40*Math.random(),m=o%2,h="M".concat(a,",").concat(n,"A").concat(s,",").concat(s," 0 0,").concat(m," ").concat(c,",").concat(l);return r.a.createElement("path",{key:"".concat(h,"-").concat(o),d:h,strokeWidth:S,stroke:J[t],fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,t))})):e.original.paths.map((function(t,o){var i=j(u.x,u.y,s.x,s.y,60+50*o),m=Object(h.a)(i,2),g=m[0],p=m[1],E=j(f.x,f.y,d.x,d.y,60+50*o),v=Object(h.a)(E,2),k=v[0],y=v[1],O=b.path();return O.moveTo(a,n),O.bezierCurveTo(g,p,k,y,c,l),r.a.createElement("path",{key:"".concat(O.toString(),"-").concat(o),d:O,strokeWidth:S,stroke:J[t],fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,t))}))}var v=$[e.original.source],k=v.source,y=v.target,O=$[e.original.target],w=O.source,x=O.target,C=(l-n)/(c-a),T=(k.y-y.y)/(k.x-y.x),L=(w.y-x.y)/(w.x-x.x),G=b.line().context(null),M=e.original.loop&&!(C-T<.5||C-L<.5)?"M".concat(a,",").concat(n,"A").concat(-30,",").concat(-20," ").concat(90,",").concat(1,",").concat(0," ").concat(c,",").concat(l):G(e.links);return r.a.createElement("path",{key:"".concat(M.toString(),"-").concat(t),d:M,strokeWidth:S,stroke:"black",fill:"none",onClick:function(){return X(e.original)}})})),V.map((function(e,t){var a=b.line().context(null),n=a(e.links),c=e.links[0],l=e.links[1],o=e.links[e.links.length-1],i=e.links[e.links.length-2],u=j(l[0],l[1],c[0],c[1],100),m=Object(h.a)(u,2),f=m[0],d=m[1],g=j(i[0],i[1],o[0],o[1],100),E=Object(h.a)(g,2),v=E[0],k=E[1],y=a([[f,d]].concat(Object(p.a)(e.links),[[v,k]])),O=A.startsWith("Just")?A.replace("Just","").toLowerCase():b.hsl(b["interpolate".concat(A)](t/V.length)).darker();return r.a.createElement(r.a.Fragment,{key:"".concat(n,"_").concat(t)},r.a.createElement("path",{id:e.original.id,d:n,strokeWidth:x,stroke:O,fill:"none",onClick:function(){return X(e.original)}},r.a.createElement("title",null,e.original.id)),s?r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{id:"".concat(e.original.id,"_invisible"),d:y,fill:"none"}),r.a.createElement("text",{dy:12},r.a.createElement("textPath",{startOffset:"50%",textAnchor:"middle",href:"#".concat(e.original.id,"_invisible")},e.original.id))):null)}))))})),x=a(101);function C(e){var t=e.onDrawLabels,a=e.onColorChange,n=e.onPathDraw,c=e.onRedraw,l=e.color;return r.a.createElement("div",null,r.a.createElement("p",null,"Settings"),r.a.createElement(x.a.Label,null,"Color"),r.a.createElement(x.a.Control,{value:l,onChange:function(e){return a(e.target.value)},as:"select"},r.a.createElement("option",null,"JustGrey"),r.a.createElement("option",null,"Turbo"),r.a.createElement("option",null,"Rainbow"),r.a.createElement("option",null,"Spectral"),r.a.createElement("option",null,"Viridis"),r.a.createElement("option",null,"RdYlBu")),r.a.createElement("br",null),r.a.createElement(x.a.Group,{onChange:function(e){n(e.target.checked)}},r.a.createElement(x.a.Check,{type:"checkbox",label:"Draw paths"})),r.a.createElement("br",null),r.a.createElement(x.a.Group,{onChange:function(e){t(e.target.checked)}},r.a.createElement(x.a.Check,{type:"checkbox",label:"Draw labels"})),r.a.createElement("br",null),r.a.createElement(d.a,{onClick:function(){return c()}},"Redraw"))}var S=a(103),T=a(104),L=a(102),G=a(99),M=a(61);function H(e){var t=e.onHide,a=e.settings,c=e.onSettings,l=Object(n.useState)(a),i=Object(h.a)(l,2),u=i[0],s=i[1],m=u.chunkSize,g=u.forceSteps,p=u.linkSteps,b=u.strengthCenter,E=u.strengthXY,v=u.forceType,k=u.theta,y=u.sequenceThickness,O=u.linkThickness;return r.a.createElement(f.a,{show:!0,onHide:t,size:"lg"},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"Settings")),r.a.createElement(f.a.Body,null,r.a.createElement(x.a,{onSubmit:function(e){e.preventDefault(),c(Object(o.a)({},u,{chunkSize:+m,forceType:v,forceSteps:+g,linkSteps:+p,strengthCenter:+b,theta:+k,sequenceThickness:+y,linkThickness:+O})),t()}},r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the nodes",r.a.createElement(x.a.Text,{muted:!0},"Used in the force-based layout simulation")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:g,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{forceSteps:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Number of simulation steps for the links",r.a.createElement(x.a.Text,{muted:!0},"Increases the rigidity of the link based constraints")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:p,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{linkSteps:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Sequence chunk size",r.a.createElement(x.a.Text,{muted:!0},"If a contig is of length 5000, then chunk length 1000 would become 5 segments. Note that contigs smaller than the chunk length may not be proportionally sized")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:m,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{chunkSize:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Theta",r.a.createElement(x.a.Text,{muted:!0},"Parameter for the force directed layout")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:k,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{theta:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Strength (force xy)",r.a.createElement(x.a.Text,{muted:!0},"This parameter should be between [0,1], applies to the XY layout")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:E,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{strengthXY:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Strength (particle charge)",r.a.createElement(x.a.Text,{muted:!0},"This value is like a charged particle force, by being negative it keeps things farther apart")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{type:"number",value:b,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{strengthCenter:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Force type",r.a.createElement(x.a.Text,{muted:!0},"Force XY results in a circular style layout that can be helpful for more disjoint graphs, force center is default")),r.a.createElement(M.a,null,r.a.createElement(x.a.Control,{value:v,onChange:function(e){return s((function(t){return Object(o.a)({},t,{forceType:e.target.value})}))},as:"select"},r.a.createElement("option",null,"center"),r.a.createElement("option",null,"xy")))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Sequence thickness"),r.a.createElement(M.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:y,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{sequenceThickness:t})}))}}))),r.a.createElement(x.a.Group,{as:G.a},r.a.createElement(x.a.Label,{column:!0,sm:"4"},"Link thickness"),r.a.createElement(M.a,null,r.a.createElement("input",{type:"range",min:1,max:100,style:{width:"100%"},value:O,onChange:function(e){var t=e.target.value;s((function(e){return Object(o.a)({},e,{linkThickness:t})}))}}))),r.a.createElement(d.a,{type:"submit"},"Submit"))))}function B(e){var t=e.onHide;return r.a.createElement(f.a,{show:!0,onHide:t},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"graphgenome browser")),r.a.createElement(f.a.Body,null,r.a.createElement("p",null,"This is a small demo of browsing simple graph genomes. The app can read GFA format URLs and local files, all processing is done client side currently."),r.a.createElement("p",null,"Contact ",r.a.createElement("a",{href:"mainto:colin.diesh@gmail.com"},"Colin Diesh")),r.a.createElement("p",null,"Thanks to the BCC2020 pangenome team, and"," ",r.a.createElement("a",{href:"https://github.com/rrwick/Bandage"},"Bandage")," for inspiration."),r.a.createElement("p",null,"Sample data from GFA-spec repo (MT.gfa), Andrea Guarracino (path example), and gfalint (Shaun Jackman)"),r.a.createElement("p",null,"This app attempts to support GFA2 but probably does not properly render the intricacies of the edge spec"),r.a.createElement("a",{href:"https://github.com/cmdcolin/graphgenomeviewer"},"GitHub")))}function N(e){var t=e.onHide,a=e.onData,c=Object(n.useState)(),l=Object(h.a)(c,2),o=l[0],i=l[1];return r.a.createElement(f.a,{show:!0,onHide:t},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"graphgenome browser")),r.a.createElement(f.a.Body,null,r.a.createElement(x.a,{onSubmit:function(){a(o),t()}},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Enter URL"),r.a.createElement(x.a.Control,{type:"input",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement(d.a,{type:"submit"},"Submit"))))}function F(e){var t=e.onHide,a=e.onGraph,c=Object(n.useRef)();return r.a.createElement(f.a,{show:!0,onHide:t},r.a.createElement(f.a.Header,{closeButton:!0},r.a.createElement(f.a.Title,null,"Open file")),r.a.createElement(f.a.Body,null,r.a.createElement(x.a,{onSubmit:function(){var e=Object(s.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,c.current.files[0].text();case 3:r=e.sent,a(r),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Open file"),r.a.createElement(x.a.Control,{ref:c,type:"file"})),r.a.createElement(d.a,{type:"submit"},"Submit"))))}function W(e){var t=e.onData,a=e.settings,c=e.onGraph,l=e.onExportSVG,o=e.onSettings,i=Object(n.useState)(),u=Object(h.a)(i,2),s=u[0],m=u[1],f=Object(n.useState)(),d=Object(h.a)(f,2),g=d[0],p=d[1],b=Object(n.useState)(),E=Object(h.a)(b,2),v=E[0],k=E[1],y=Object(n.useState)(),O=Object(h.a)(y,2),j=O[0],w=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{bg:"light",expand:"lg"},r.a.createElement(S.a.Brand,{href:"#home"},"graphgenome browser"),r.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(S.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(T.a,{className:"mr-auto"},r.a.createElement(L.a,{title:"File",id:"basic-nav-dropdown"},r.a.createElement(L.a.Item,{onClick:function(){return k(!0)}},"Open URL"),r.a.createElement(L.a.Item,{onClick:function(){return w(!0)}},"Open file"),r.a.createElement(L.a.Item,{onClick:function(){return l()}},"Export SVG")),r.a.createElement(L.a,{title:"Examples",id:"basic-nav-dropdown"},r.a.createElement(L.a.Item,{onClick:function(){return t("MT.gfa")}},"MT GFA-spec example"),r.a.createElement(L.a.Item,{onClick:function(){return t("toy_pangenome.gfa")}},"Paths example"),r.a.createElement(L.a.Item,{onClick:function(){return t("example1.gfa")}},"Paths example 2"),r.a.createElement(L.a.Item,{onClick:function(){return t("big1.gfa")}},"Big1"),r.a.createElement(L.a.Item,{onClick:function(){return t("ir1.gfa")}},"Ir1"),r.a.createElement(L.a.Item,{onClick:function(){return t("test_contig_placement_assembly_graph.gfa")}},"Unicycler example"),r.a.createElement(L.a.Item,{onClick:function(){return t("circle.gfa")}},"Simple circle"),r.a.createElement(L.a.Item,{onClick:function(){return t("example1.gfa2")}},"GFA2.0 example")),r.a.createElement(T.a.Link,{onClick:function(){p(!0)}},"Settings"),r.a.createElement(T.a.Link,{onClick:function(){m(!0)}},"About")))),s?r.a.createElement(B,{onHide:function(){return m(!1)}}):null,g?r.a.createElement(H,{settings:a,onHide:function(){return p(!1)},onSettings:o}):null,v?r.a.createElement(N,{onData:t,onHide:function(){return k(!1)}}):null,j?r.a.createElement(F,{onGraph:c,onHide:function(){return w(!1)}}):null)}var A=a(63),I=a.n(A),q=a(8);a(92),a(93);var z=function(){var e=Object(n.useState)(),t=Object(h.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),i=Object(h.a)(l,2),f=i[0],d=i[1],p=Object(n.useState)(),b=Object(h.a)(p,2),y=b[0],O=b[1],j=Object(n.useState)("Rainbow"),x=Object(h.a)(j,2),S=x[0],T=x[1],L=Object(n.useState)(),G=Object(h.a)(L,2)[1],M=r.a.useCallback((function(){return G({})}),[]),H=Object(n.useState)(!1),B=Object(h.a)(H,2),N=B[0],F=B[1],A=Object(n.useState)(0),z=Object(h.a)(A,2),R=z[0],D=z[1],_=Object(n.useState)(!1),P=Object(h.a)(_,2),X=P[0],Y=P[1],J=Object(q.d)({strengthCenter:Object(q.e)(q.a,-50),strengthXY:Object(q.e)(q.a,.1),chunkSize:Object(q.e)(q.a,1e3),forceSteps:Object(q.e)(q.a,200),linkSteps:Object(q.e)(q.a,1),sequenceThickness:Object(q.e)(q.a,10),linkThickness:Object(q.e)(q.a,2),theta:Object(q.e)(q.a,.9),forceType:Object(q.e)(q.c,"center"),dataset:Object(q.e)(q.c,"MT.gfa")}),U=Object(h.a)(J,2),V=U[0],Z=U[1],$=V.dataset,K=Object(m.a)(V,["dataset"]),Q=Object(n.useRef)();Object(n.useEffect)((function(){Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch($);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch ".concat(t.statusText));case 6:return e.next=8,t.text();case 8:a=e.sent,d(a),O(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),O(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()}),[$]);var ee=Object(n.useMemo)((function(){return f?function(e){var t,a={nodes:[],links:[],paths:[],header:[]},n=Object(v.a)(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.startsWith("H")&&function(){var e={},t=r.split("\t");Object(E.a)(t).slice(1).forEach((function(t){return k(t,e)})),a.header.push(e)}(),r.startsWith("S")){var c=r.split("\t"),l=Object(E.a)(c),o=l[1],i=l.slice(2),u=0,s="",m=void 0,h=!1;+i[0]?(u=+i[0],s=i[1],m=i.slice(2)):(h=!0,u=(s=i[0]).length,m=i.slice(1));for(var f={},d=0;d<m.length;d++)k(i[d],f);h&&f.LN&&(u=f.LN),a.nodes.push({id:o,length:u,sequence:s,tags:f})}else if(r.startsWith("E")){for(var g=r.split("\t"),p=Object(E.a)(g),b=(p[1],p[2]),y=p[3],O=(p[4],p[5],p[6],p[7],p[8]),j=p.slice(9),w=b.slice(0,-1),x=y.slice(0,-1),C=b.charAt(b.length-1),S=b.charAt(y.length-1),T={},L=0;L<j.length;L++)k(j[L],T);a.links.push({source:w,target:x,strand1:C,strand2:S,cigar:O,tags:T})}else if(r.startsWith("L")){for(var G=r.split("\t"),M=Object(E.a)(G),H=M[1],B=M[2],N=M[3],F=M[4],W=M[5],A=M.slice(6),I={},q=0;q<A.length;q++)k(A[q],I);a.links.push({source:H,target:N,strand1:B,strand2:F,cigar:W,tags:I})}else if(r.startsWith("P")){var z=r.split("\t"),R=Object(E.a)(z),D=R[1],_=R[2],P=R.slice(3);a.paths.push({name:D,path:_,rest:P})}}}catch(X){n.e(X)}finally{n.f()}return a}(f):void 0}),[f]);return r.a.createElement("div",null,r.a.createElement(W,{onData:function(e){Z(Object(o.a)({dataset:e},K)),M()},onGraph:function(e){d(e)},onSettings:function(e){Z(Object(o.a)({},e,{dataset:$})),M()},onExportSVG:function(){I()(function(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var a="".concat(window.location.href,"#"),n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);n.nextNode();){var r,c=Object(v.a)(n.currentNode.attributes);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.value.includes(a)&&(l.value=l.value.replace(a,"#"))}}catch(i){c.e(i)}finally{c.f()}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var o=(new window.XMLSerializer).serializeToString(e);return new Blob([o],{type:"image/svg+xml"})}(Q.current))},settings:K}),a?r.a.createElement(g,{data:a,onModal:function(e){c(e)},onHide:function(){c(void 0)}}):null,r.a.createElement("div",{className:"flexcontainer"},r.a.createElement("div",{id:"sidebar",className:"sidebar"},r.a.createElement(C,{color:S,onColorChange:function(e){return T(e)},onDrawLabels:function(e){return Y(e)},onPathDraw:function(e){return F(e)},onRedraw:function(){return D((function(e){return e+1}))}})),r.a.createElement("div",{className:"body"},y?r.a.createElement("div",{style:{color:"red"}},y):null,ee?r.a.createElement(w,{graph:ee,ref:Q,color:S,redraw:R,drawLabels:X,drawPaths:N,onFeatureClick:function(e){c(e)},settings:K}):null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q.b,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.0f8de9bd.chunk.js.map